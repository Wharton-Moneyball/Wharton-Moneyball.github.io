<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Problem Set 4</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">WMA2020</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-futbol-o"></span>
     
    Lecture Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lecture1.html">Lecture 1</a>
    </li>
    <li>
      <a href="lecture2.html">Lecture 2</a>
    </li>
    <li>
      <a href="lecture3.html">Lecture 3</a>
    </li>
    <li>
      <a href="lecture4.html">Lecture 4</a>
    </li>
    <li>
      <a href="lecture5.html">Lecture 5</a>
    </li>
    <li>
      <a href="lecture6.html">Lecture 6</a>
    </li>
    <li>
      <a href="lecture7.html">Lecture 7</a>
    </li>
    <li>
      <a href="lecture8.html">Lecture 8</a>
    </li>
    <li>
      <a href="nfl_lecture.html">nflscrapR lecture</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-dribbble"></span>
     
    Problem Sets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ps0.html">Problem Set 0</a>
    </li>
    <li>
      <a href="ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="ps2.html">Problem Set 2</a>
    </li>
    <li>
      <a href="ps3.html">Problem Set 3</a>
    </li>
    <li>
      <a href="ps4.html">Problem Set 4</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-bar-chart"></span>
     
    Training Camp
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="install_setup.html">Installation</a>
    </li>
    <li>
      <a href="tc_lecture1.html">Lecture 1</a>
    </li>
    <li>
      <a href="tc_ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="tc_lecture2.html">Lecture 2</a>
    </li>
    <li>
      <a href="tc_ps2.html">Problem Set 2</a>
    </li>
    <li>
      <a href="tc_lecture3.html">Lecture 3</a>
    </li>
    <li>
      <a href="tc_ps3.html">Problem Set 3</a>
    </li>
    <li>
      <a href="tc_lecture4.html">Lecture 4</a>
    </li>
    <li>
      <a href="tc_lecture5.html">Lecture 5</a>
    </li>
    <li>
      <a href="more_resources.html">More resources</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Problem Set 4</h1>

</div>


<div id="review" class="section level2">
<h2>Review</h2>
<p>We understand that it’s been quite a busy week and that we’ve thrown a ton of material your way. We’d like you to take some time today and this weekend to go through the notes of the first four lectures and first three problem sets carefully with your team and RTA.</p>
</div>
<div id="visualizing-the-strike-zone" class="section level2">
<h2>Visualizing the Strike Zone</h2>
<p>In this part, we will continue to use heatmaps (introduced briefly in <a href="lecture2.html">Lecture 2</a>) to explore the strike zone in baseball. We will focus on data collected by PITCHf/x. At a high-level, PITCHf/x consists of a set of cameras installed at every ballpark which tracks the motion of each pitch. For more information about the system, check out this <a href="http://baseball.physics.illinois.edu/FastPFXGuide.pdf">article by Mike Fast</a> The data collected by PITCHf/x is then transmitted to the MLB Gameday application along with contextual information about the pitch. The <a href="data/pitchfx_2015.csv">data</a> contains the measurements from the PITCHf/x system recorded in 2015.</p>
<ol style="list-style-type: decimal">
<li>Read the data into a tbl called `pitches’.</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="op">&gt;</span><span class="st"> </span>pitches &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/pitchfx_2015.csv&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a>Parsed with column specification<span class="op">:</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">cols</span>(</span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="dt">Description =</span> <span class="kw">col_character</span>(),</span>
<span id="cb1-6"><a href="#cb1-6"></a>  <span class="dt">X =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-7"><a href="#cb1-7"></a>  <span class="dt">Z =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-8"><a href="#cb1-8"></a>  <span class="dt">COUNT =</span> <span class="kw">col_character</span>(),</span>
<span id="cb1-9"><a href="#cb1-9"></a>  <span class="dt">P_HAND =</span> <span class="kw">col_character</span>(),</span>
<span id="cb1-10"><a href="#cb1-10"></a>  <span class="dt">B_HAND =</span> <span class="kw">col_character</span>()</span>
<span id="cb1-11"><a href="#cb1-11"></a>)</span></code></pre></div>
<p>The columns are: * <code>Description</code>: Records the outcome of the pitch (Called Strike, Swinging Strike, Foul, etc.) * <code>X</code> and <code>Z</code>: the horizontal and vertical coordinates of the pitch in inches. Note that the center of home plate corresponds to <code>X = 0</code>. Note that the <code>X</code> coordinate are recorded from the catcher’s perspective, with negative values on the left and positive values on the right. In this coordinate system, a right-handed batter will line up to the left (i.e. negative <code>X</code> values). * <code>COUNT</code>: The ball-strike count for each pitch * <code>P_HAND</code> and <code>B_HAND</code>: the handedness of the batter and pitcher.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>To visualize the strike zone, we are going to want to filter out only the called strikes and balls. Moreover, it will be helpful to convert the Description to numeric values (1 for called strikes, 0 for balls). Use the pipe operator, <code>filter()</code>, <code>mutate()</code>, and <code>case_when()</code> to create a new tbl <code>called_pitches</code> containing only the called strike and balls and that includes a new column “Call” whose value is 0 for balls and 1 for called strike.</p></li>
<li><p>To get started, we will create a plot and then add to it sequentially:</p></li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="op">&gt;</span><span class="st"> </span>g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> called_pitches)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>To estimate the probability of a called strike given the pitch location, we will use a strategy similar to what we used to make heatmaps in <a href="module2.html">Module 2</a>. Essentially, we divide the plane into several small rectangular bins and compute the proportion of called strikes within each bin. To compute this, we use the <code>stat_summary_2d()</code> function, which takes three aesthetics:</li>
</ol>
<ul>
<li>x: variable on the horizontal axis</li>
<li>y: variable on vertical axis</li>
<li>z: variable that is passed to the summary function.</li>
</ul>
<p>By default, <code>stat_summary_2d()</code> divides the plane into rectangles based on the aesthetics x and y, and then computes the average value of z for observations in the bin. We can add this layer to our plot <code>g</code> as follows and obtain the following plot</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">&gt;</span><span class="st"> </span>g &lt;-<span class="st"> </span>g <span class="op">+</span><span class="st"> </span><span class="kw">stat_summary_2d</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> X, <span class="dt">y =</span> Z, <span class="dt">z =</span> Call))</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="op">&gt;</span><span class="st"> </span>g</span></code></pre></div>
<p><img src="ps4_files/figure-html/stat-summary-2d-1.png" width="384" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>You’ll notice in the plot above that <code>stat_summary_2d()</code> has added a legend to our plot. However, the title of the legend is a somewhat non-informative. The color scheme does not distinguish between different values particularly well.</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="op">&gt;</span><span class="st"> </span>g &lt;-<span class="st"> </span>g <span class="op">+</span><span class="st"> </span><span class="kw">scale_fill_distiller</span>(<span class="st">&quot;P(Called Strike)&quot;</span>, <span class="dt">palette =</span> <span class="st">&quot;RdBu&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="op">&gt;</span><span class="st"> </span>g</span></code></pre></div>
<p><img src="ps4_files/figure-html/rdbu-1.png" width="384" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>According to the official rule book, the strike zone is a rectangular region that spans the width of home plate and extends vertically from the batter’s knee to the middle of his chest. From the plot above, we see that the region in which the strike zone probability is higher than 90% is definitely not rectangular. To better visualize the discrepancy, we can add another layer to plot which delimits an approximation of the rule book strike zone. The code below does just that. The <code>xmin</code> and <code>xmax</code> arguments give the horizontal limits of the strike zone (in this case, the coordinates of the edges of the strike zone) and the <code>ymin</code> and <code>ymax</code> arguments are the average vertical limits measured by PITCHf/x. <strong>Note: these values were pre-computed using a much larger dataset</strong></li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="op">&gt;</span><span class="st"> </span>g &lt;-<span class="st"> </span>g <span class="op">+</span><span class="st"> </span><span class="kw">annotate</span>(<span class="st">&quot;rect&quot;</span>, <span class="dt">xmin =</span> <span class="fl">-8.5</span>, <span class="dt">xmax =</span> <span class="fl">8.5</span>, <span class="dt">ymin =</span> <span class="dv">19</span>, <span class="dt">ymax =</span> <span class="fl">41.5</span>, <span class="dt">alpha =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p>We can additionally make the plot a bit more attractive visually as follows:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="op">&gt;</span><span class="st"> </span>g &lt;-<span class="st"> </span>g <span class="op">+</span><span class="st"> </span><span class="kw">theme_classic</span>()</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="op">&gt;</span><span class="st"> </span>g &lt;-<span class="st"> </span>g <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>())</span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="op">&gt;</span><span class="st"> </span>g &lt;-<span class="st"> </span>g <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">axis.title.y =</span> <span class="kw">element_blank</span>())</span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="op">&gt;</span><span class="st"> </span>g &lt;-<span class="st"> </span>g <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Estimated Strike Zone&quot;</span>)</span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="op">&gt;</span><span class="st"> </span>g</span></code></pre></div>
<p><img src="ps4_files/figure-html/unnamed-chunk-2-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="nba-team-shooting-statistics" class="section level2">
<h2>NBA Team Shooting Statistics</h2>
<p>The file “nba_boxscore.csv” lists detailed box score information about every NBA player in every season ranging from 1996–97 season and 2015-16 season. We will look at team shooting statistics over this 20-season span.</p>
<ol style="list-style-type: decimal">
<li>Load the data into a tbl called <code>raw_boxscore</code>.</li>
</ol>
<pre><code>Parsed with column specification:
cols(
  .default = col_double(),
  Player = col_character(),
  Pos = col_character(),
  Tm = col_character()
)
See spec(...) for full column specifications.</code></pre>
<p>The column “Tm” lists the team on which each player played. We can look at the relative frequencies of the teams using the <code>table()</code> function. This function takes a vector and returns the frequencies of each unique value.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">table</span>(raw_boxscore[[<span class="st">&quot;Tm&quot;</span>]])</span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a> ATL  BOS  BRK  CHA  CHH  CHI  CHO  CLE  DAL  DEN  DET  GSW  HOU  IND  LAC  LAL  MEM  MIA  MIL  MIN  NJN  NOH  NOK  NOP  NYK  OKC  ORL  PHI </span>
<span id="cb8-4"><a href="#cb8-4"></a> <span class="dv">347</span>  <span class="dv">350</span>   <span class="dv">72</span>  <span class="dv">183</span>  <span class="dv">101</span>  <span class="dv">335</span>   <span class="dv">34</span>  <span class="dv">359</span>  <span class="dv">356</span>  <span class="dv">354</span>  <span class="dv">321</span>  <span class="dv">355</span>  <span class="dv">359</span>  <span class="dv">319</span>  <span class="dv">347</span>  <span class="dv">319</span>  <span class="dv">271</span>  <span class="dv">348</span>  <span class="dv">337</span>  <span class="dv">328</span>  <span class="dv">298</span>  <span class="dv">161</span>   <span class="dv">34</span>   <span class="dv">63</span>  <span class="dv">345</span>  <span class="dv">144</span>  <span class="dv">340</span>  <span class="dv">352</span> </span>
<span id="cb8-5"><a href="#cb8-5"></a> PHO  POR  SAC  SAS  SEA  TOR  TOT  UTA  VAN  WAS  WSB </span>
<span id="cb8-6"><a href="#cb8-6"></a> <span class="dv">348</span>  <span class="dv">338</span>  <span class="dv">332</span>  <span class="dv">342</span>  <span class="dv">195</span>  <span class="dv">366</span> <span class="dv">1047</span>  <span class="dv">309</span>   <span class="dv">80</span>  <span class="dv">333</span>   <span class="dv">15</span> </span></code></pre></div>
<p>Looking at the list of teams you may see a few that you don’t recognize. For instance, there are 15 players listed as playing on “WSB”. We can use <code>filter()</code> to take a closer look at these players</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(raw_boxscore, Tm <span class="op">==</span><span class="st"> &quot;WSB&quot;</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co"># A tibble: 15 x 22</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>   Season Player      Pos     Age Tm        G    GS    MP   FGM   FGA   TPM   TPA   FTM   FTA   ORB   DRB   AST   STL   BLK   TOV    PF   PTS</span>
<span id="cb9-4"><a href="#cb9-4"></a>    <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="st"> </span><span class="dv">1</span>   <span class="dv">1997</span> Ashraf Ama… PF       <span class="dv">25</span> WSB      <span class="dv">31</span>     <span class="dv">0</span>   <span class="dv">144</span>    <span class="dv">12</span>    <span class="dv">40</span>     <span class="dv">1</span>     <span class="dv">1</span>    <span class="dv">15</span>    <span class="dv">28</span>    <span class="dv">19</span>    <span class="dv">33</span>     <span class="dv">3</span>     <span class="dv">7</span>     <span class="dv">3</span>    <span class="dv">10</span>    <span class="dv">29</span>    <span class="dv">40</span></span>
<span id="cb9-6"><a href="#cb9-6"></a> <span class="dv">2</span>   <span class="dv">1997</span> Calbert Ch… SG       <span class="dv">25</span> WSB      <span class="dv">79</span>    <span class="dv">79</span>  <span class="dv">2411</span>   <span class="dv">369</span>   <span class="dv">730</span>     <span class="dv">4</span>    <span class="dv">30</span>    <span class="dv">95</span>   <span class="dv">137</span>    <span class="dv">70</span>   <span class="dv">198</span>   <span class="dv">114</span>    <span class="dv">77</span>    <span class="dv">18</span>    <span class="dv">94</span>   <span class="dv">226</span>   <span class="dv">837</span></span>
<span id="cb9-7"><a href="#cb9-7"></a> <span class="dv">3</span>   <span class="dv">1997</span> Matt Fish   C        <span class="dv">27</span> WSB       <span class="dv">5</span>     <span class="dv">0</span>     <span class="dv">7</span>     <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">4</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">2</span>     <span class="dv">2</span>     <span class="dv">2</span></span>
<span id="cb9-8"><a href="#cb9-8"></a> <span class="dv">4</span>   <span class="dv">1997</span> Harvey Gra… PF       <span class="dv">31</span> WSB      <span class="dv">78</span>    <span class="dv">25</span>  <span class="dv">1604</span>   <span class="dv">129</span>   <span class="dv">314</span>    <span class="dv">28</span>    <span class="dv">89</span>    <span class="dv">30</span>    <span class="dv">39</span>    <span class="dv">63</span>   <span class="dv">193</span>    <span class="dv">68</span>    <span class="dv">46</span>    <span class="dv">48</span>    <span class="dv">30</span>   <span class="dv">167</span>   <span class="dv">316</span></span>
<span id="cb9-9"><a href="#cb9-9"></a> <span class="dv">5</span>   <span class="dv">1997</span> Juwan Howa… SF       <span class="dv">23</span> WSB      <span class="dv">82</span>    <span class="dv">82</span>  <span class="dv">3324</span>   <span class="dv">638</span>  <span class="dv">1313</span>     <span class="dv">0</span>     <span class="dv">2</span>   <span class="dv">294</span>   <span class="dv">389</span>   <span class="dv">202</span>   <span class="dv">450</span>   <span class="dv">311</span>    <span class="dv">93</span>    <span class="dv">23</span>   <span class="dv">246</span>   <span class="dv">259</span>  <span class="dv">1570</span></span>
<span id="cb9-10"><a href="#cb9-10"></a> <span class="dv">6</span>   <span class="dv">1997</span> Jaren Jack… SG       <span class="dv">29</span> WSB      <span class="dv">75</span>     <span class="dv">0</span>  <span class="dv">1133</span>   <span class="dv">134</span>   <span class="dv">329</span>    <span class="dv">53</span>   <span class="dv">158</span>    <span class="dv">53</span>    <span class="dv">69</span>    <span class="dv">31</span>   <span class="dv">101</span>    <span class="dv">65</span>    <span class="dv">45</span>    <span class="dv">16</span>    <span class="dv">60</span>   <span class="dv">131</span>   <span class="dv">374</span></span>
<span id="cb9-11"><a href="#cb9-11"></a> <span class="dv">7</span>   <span class="dv">1997</span> Tim Legler  SG       <span class="dv">30</span> WSB      <span class="dv">15</span>     <span class="dv">0</span>   <span class="dv">182</span>    <span class="dv">15</span>    <span class="dv">48</span>     <span class="dv">8</span>    <span class="dv">29</span>     <span class="dv">6</span>     <span class="dv">7</span>     <span class="dv">0</span>    <span class="dv">21</span>     <span class="dv">7</span>     <span class="dv">3</span>     <span class="dv">5</span>     <span class="dv">9</span>    <span class="dv">21</span>    <span class="dv">44</span></span>
<span id="cb9-12"><a href="#cb9-12"></a> <span class="dv">8</span>   <span class="dv">1997</span> Gheorghe M… C        <span class="dv">25</span> WSB      <span class="dv">73</span>    <span class="dv">69</span>  <span class="dv">1849</span>   <span class="dv">327</span>   <span class="dv">541</span>     <span class="dv">0</span>     <span class="dv">0</span>   <span class="dv">123</span>   <span class="dv">199</span>   <span class="dv">141</span>   <span class="dv">340</span>    <span class="dv">29</span>    <span class="dv">43</span>    <span class="dv">96</span>   <span class="dv">117</span>   <span class="dv">230</span>   <span class="dv">777</span></span>
<span id="cb9-13"><a href="#cb9-13"></a> <span class="dv">9</span>   <span class="dv">1997</span> Tracy Murr… SF       <span class="dv">25</span> WSB      <span class="dv">82</span>     <span class="dv">1</span>  <span class="dv">1814</span>   <span class="dv">288</span>   <span class="dv">678</span>   <span class="dv">106</span>   <span class="dv">300</span>   <span class="dv">135</span>   <span class="dv">161</span>    <span class="dv">84</span>   <span class="dv">169</span>    <span class="dv">78</span>    <span class="dv">69</span>    <span class="dv">19</span>    <span class="dv">86</span>   <span class="dv">150</span>   <span class="dv">817</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="dv">10</span>   <span class="dv">1997</span> Gaylon Nic… SG       <span class="dv">27</span> WSB       <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">6</span>     <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">2</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="dv">11</span>   <span class="dv">1997</span> Rod Strick… PG       <span class="dv">30</span> WSB      <span class="dv">82</span>    <span class="dv">81</span>  <span class="dv">2997</span>   <span class="dv">515</span>  <span class="dv">1105</span>    <span class="dv">13</span>    <span class="dv">77</span>   <span class="dv">367</span>   <span class="dv">497</span>    <span class="dv">95</span>   <span class="dv">240</span>   <span class="dv">727</span>   <span class="dv">143</span>    <span class="dv">14</span>   <span class="dv">270</span>   <span class="dv">166</span>  <span class="dv">1410</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="dv">12</span>   <span class="dv">1997</span> Ben Wallace PF       <span class="dv">22</span> WSB      <span class="dv">34</span>     <span class="dv">0</span>   <span class="dv">197</span>    <span class="dv">16</span>    <span class="dv">46</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">6</span>    <span class="dv">20</span>    <span class="dv">25</span>    <span class="dv">33</span>     <span class="dv">2</span>     <span class="dv">8</span>    <span class="dv">11</span>    <span class="dv">18</span>    <span class="dv">27</span>    <span class="dv">38</span></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="dv">13</span>   <span class="dv">1997</span> Chris Webb… PF       <span class="dv">23</span> WSB      <span class="dv">72</span>    <span class="dv">72</span>  <span class="dv">2806</span>   <span class="dv">604</span>  <span class="dv">1167</span>    <span class="dv">60</span>   <span class="dv">151</span>   <span class="dv">177</span>   <span class="dv">313</span>   <span class="dv">238</span>   <span class="dv">505</span>   <span class="dv">331</span>   <span class="dv">122</span>   <span class="dv">137</span>   <span class="dv">230</span>   <span class="dv">258</span>  <span class="dv">1445</span></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="dv">14</span>   <span class="dv">1997</span> Chris Whit… PG       <span class="dv">25</span> WSB      <span class="dv">82</span>     <span class="dv">1</span>  <span class="dv">1117</span>   <span class="dv">139</span>   <span class="dv">330</span>    <span class="dv">58</span>   <span class="dv">163</span>    <span class="dv">94</span>   <span class="dv">113</span>    <span class="dv">13</span>    <span class="dv">91</span>   <span class="dv">182</span>    <span class="dv">49</span>     <span class="dv">4</span>    <span class="dv">68</span>   <span class="dv">100</span>   <span class="dv">430</span></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="dv">15</span>   <span class="dv">1997</span> Lorenzo Wi… C        <span class="dv">27</span> WSB      <span class="dv">19</span>     <span class="dv">0</span>   <span class="dv">264</span>    <span class="dv">20</span>    <span class="dv">31</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">5</span>     <span class="dv">7</span>    <span class="dv">28</span>    <span class="dv">41</span>     <span class="dv">4</span>     <span class="dv">6</span>     <span class="dv">8</span>    <span class="dv">18</span>    <span class="dv">49</span>    <span class="dv">45</span></span></code></pre></div>
<p>These fifteen players during the 1996-97 season on the Washington Bullets, which was renamed the Washington Wizards at the end of that season. There are a few other examples: VAN refers to the Vancouver Grizzlies who moved to Memphis and CHH refers to the original Charlotte Hornets franchise, which ultimately relocated to New Orleans.</p>
<p>One of the teams listed is “TOT”. This does not refer any specific team. Instead these rows record the <em>total</em> statistics recorded by a player if he played for multiple teams in a single season. For the purposes of understanding how team shooting statistics changed over time, we will not want to include these rows in our analysis.</p>
<ol start="2" style="list-style-type: decimal">
<li>Use <code>filter()</code>, <code>group_by()</code>, <code>summary()</code>, and <code>mutate()</code> to create a new tbl called <code>team_boxscore</code> that does the following:</li>
</ol>
<ul>
<li>removes the rows corresponding to player totals (i.e. <code>Tm == "TOT"</code>)</li>
<li>groups the tbl according to Season and Tm. <strong>Note: it is important to group on season first and team second </strong></li>
<li>Computes the total number of made and attempted field goals, three pointers, and free throws, along with points scored by each team in each season.</li>
<li>Adds a column for team field goal percentage (FGP), three point percentage (TPP), and free throw percentages (FTP).</li>
<li>Ungroup the resulting tbl</li>
</ul>
<pre><code>`summarise()` regrouping output by &#39;Season&#39; (override with `.groups` argument)</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Use <code>filter()</code> to create a new tbl called <code>reduced_boxscore</code> that pulls out the rows of <code>team_boxscore</code> corresponding to the following teams: BOS, CLE, DAL, DET, GSW, LAL, MIA, and SAS. Then create a plot of these teams’ three point percentage in each season. Be sure to color the points according to the team. What patterns do you notice?</li>
</ol>
</div>
<div id="work-with-new-data" class="section level2">
<h2>Work with new data</h2>
<p>Once you finish reviewing the material from earlier this week, we’d like you to use some of the tools we introduced in <a href="lecture4.html">Lecture 4</a> to read in new data into R. Then, using the skills you’ve learned in the first four lectures, we’d like to you do some type of analysis with this data. It doesn’t need to be sophisticated – even making a few interesting visualizations or computing some interesting summaries is enough. We just want you to get some practice working with some data that you’ve collected yourselves!</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
