<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Lecture 2: The grammar of graphics and filtering data</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">WMA2020</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-futbol-o"></span>
     
    Lecture Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lecture1.html">Lecture 1</a>
    </li>
    <li>
      <a href="lecture2.html">Lecture 2</a>
    </li>
    <li>
      <a href="lecture3.html">Lecture 3</a>
    </li>
    <li>
      <a href="lecture4.html">Lecture 4</a>
    </li>
    <li>
      <a href="lecture5.html">Lecture 5</a>
    </li>
    <li>
      <a href="lecture6.html">Lecture 6</a>
    </li>
    <li>
      <a href="lecture7.html">Lecture 7</a>
    </li>
    <li>
      <a href="lecture8.html">Lecture 8</a>
    </li>
    <li>
      <a href="nfl_lecture.html">nflscrapR lecture</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-dribbble"></span>
     
    Problem Sets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ps0.html">Problem Set 0</a>
    </li>
    <li>
      <a href="ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="ps2.html">Problem Set 2</a>
    </li>
    <li>
      <a href="ps3.html">Problem Set 3</a>
    </li>
    <li>
      <a href="ps4.html">Problem Set 4</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-bar-chart"></span>
     
    Training Camp
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="install_setup.html">Installation</a>
    </li>
    <li>
      <a href="tc_lecture1.html">Lecture 1</a>
    </li>
    <li>
      <a href="tc_ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="tc_lecture2.html">Lecture 2</a>
    </li>
    <li>
      <a href="tc_ps2.html">Problem Set 2</a>
    </li>
    <li>
      <a href="tc_lecture3.html">Lecture 3</a>
    </li>
    <li>
      <a href="tc_ps3.html">Problem Set 3</a>
    </li>
    <li>
      <a href="tc_lecture4.html">Lecture 4</a>
    </li>
    <li>
      <a href="tc_lecture5.html">Lecture 5</a>
    </li>
    <li>
      <a href="more_resources.html">More resources</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Lecture 2: The grammar of graphics and filtering data</h1>

</div>


<p>We’re going to pick up right where we left off yesterday in <a href="tc_ps1.html">Problem Set 1</a>, where you wrote a script to create a <code>tbl</code> containg several shooting statistics for NBA players between the 1996-97 season and the 2015-16 season. Your script could look something like what is the code block below, and for reasons that will become clear shortly, we are going to call our <code>tbl</code> <code>raw_shooting</code> (remember: writing code in script files is good practice!)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="co"># Read in data</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="er">&gt;</span><span class="st"> </span>raw_shooting &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/nba_shooting.csv&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a>Parsed with column specification<span class="op">:</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">cols</span>(</span>
<span id="cb1-6"><a href="#cb1-6"></a>  <span class="dt">PLAYER =</span> <span class="kw">col_character</span>(),</span>
<span id="cb1-7"><a href="#cb1-7"></a>  <span class="dt">SEASON =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-8"><a href="#cb1-8"></a>  <span class="dt">FGM =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-9"><a href="#cb1-9"></a>  <span class="dt">FGA =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-10"><a href="#cb1-10"></a>  <span class="dt">TPM =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-11"><a href="#cb1-11"></a>  <span class="dt">TPA =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-12"><a href="#cb1-12"></a>  <span class="dt">FTM =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-13"><a href="#cb1-13"></a>  <span class="dt">FTA =</span> <span class="kw">col_double</span>()</span>
<span id="cb1-14"><a href="#cb1-14"></a>)</span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="op">&gt;</span><span class="st"> </span><span class="co"># Create new columns</span></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="er">&gt;</span><span class="st"> </span>raw_shooting &lt;-</span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(raw_shooting,</span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="op">+</span><span class="st">          </span><span class="dt">FGP =</span> FGM <span class="op">/</span><span class="st"> </span>FGA,</span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="op">+</span><span class="st">          </span><span class="dt">TPP =</span> TPM <span class="op">/</span><span class="st"> </span>TPA,</span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="op">+</span><span class="st">          </span><span class="dt">FTP =</span> FTM <span class="op">/</span><span class="st"> </span>FTA,</span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="op">+</span><span class="st">          </span><span class="dt">eFGP =</span> (FGM <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span> <span class="op">*</span><span class="st"> </span>TPM) <span class="op">/</span><span class="st"> </span>(FGA),</span>
<span id="cb1-22"><a href="#cb1-22"></a><span class="op">+</span><span class="st">          </span><span class="dt">PTS =</span> FTM <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>FGM <span class="op">+</span><span class="st"> </span>TPM,</span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="op">+</span><span class="st">          </span><span class="dt">TSP =</span> PTS<span class="op">/</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>(FGA <span class="op">+</span><span class="st"> </span><span class="fl">0.44</span> <span class="op">*</span><span class="st"> </span>FTA)))</span>
<span id="cb1-24"><a href="#cb1-24"></a><span class="op">&gt;</span><span class="st"> </span><span class="co"># Sort by the TSP in descending order</span></span>
<span id="cb1-25"><a href="#cb1-25"></a><span class="er">&gt;</span><span class="st"> </span>raw_shooting &lt;-<span class="st"> </span><span class="kw">arrange</span>(raw_shooting, <span class="kw">desc</span>(TSP))</span></code></pre></div>
<p>As we learned at the end of <a href="tc_lecture1.html">Lecture 1</a>, rather than repeatedly referring to our <code>tbl</code>, we can use the pipe <code>%&gt;%</code> to chain together our operations for a much <em>cleaner</em> chunk of code:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co"># First read in the data, assigning pipeline to raw_shooting</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="er">&gt;</span><span class="st"> </span>raw_shooting &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/nba_shooting.csv&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="op">+</span><span class="st">   </span><span class="co"># Next create the new columns</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">FGP =</span> FGM <span class="op">/</span><span class="st"> </span>FGA,</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="op">+</span><span class="st">          </span><span class="dt">TPP =</span> TPM <span class="op">/</span><span class="st"> </span>TPA,</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="op">+</span><span class="st">          </span><span class="dt">FTP =</span> FTM <span class="op">/</span><span class="st"> </span>FTA,</span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="op">+</span><span class="st">          </span><span class="dt">eFGP =</span> (FGM <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span> <span class="op">*</span><span class="st"> </span>TPM) <span class="op">/</span><span class="st"> </span>(FGA),</span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="op">+</span><span class="st">          </span><span class="dt">PTS =</span> FTM <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>FGM <span class="op">+</span><span class="st"> </span>TPM,</span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="op">+</span><span class="st">          </span><span class="dt">TSP =</span> PTS <span class="op">/</span><span class="st"> </span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>(FGA <span class="op">+</span><span class="st"> </span><span class="fl">0.44</span> <span class="op">*</span><span class="st"> </span>FTA))) <span class="op">%&gt;%</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="op">+</span><span class="st">   </span><span class="co"># And finally sort by TSP</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="op">+</span><span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(TSP)) </span>
<span id="cb2-12"><a href="#cb2-12"></a>Parsed with column specification<span class="op">:</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="kw">cols</span>(</span>
<span id="cb2-14"><a href="#cb2-14"></a>  <span class="dt">PLAYER =</span> <span class="kw">col_character</span>(),</span>
<span id="cb2-15"><a href="#cb2-15"></a>  <span class="dt">SEASON =</span> <span class="kw">col_double</span>(),</span>
<span id="cb2-16"><a href="#cb2-16"></a>  <span class="dt">FGM =</span> <span class="kw">col_double</span>(),</span>
<span id="cb2-17"><a href="#cb2-17"></a>  <span class="dt">FGA =</span> <span class="kw">col_double</span>(),</span>
<span id="cb2-18"><a href="#cb2-18"></a>  <span class="dt">TPM =</span> <span class="kw">col_double</span>(),</span>
<span id="cb2-19"><a href="#cb2-19"></a>  <span class="dt">TPA =</span> <span class="kw">col_double</span>(),</span>
<span id="cb2-20"><a href="#cb2-20"></a>  <span class="dt">FTM =</span> <span class="kw">col_double</span>(),</span>
<span id="cb2-21"><a href="#cb2-21"></a>  <span class="dt">FTA =</span> <span class="kw">col_double</span>()</span>
<span id="cb2-22"><a href="#cb2-22"></a>)</span></code></pre></div>
<div id="introduction-to-ggplot2" class="section level2">
<h2>Introduction to ggplot2</h2>
<p>We will use visualizations to answer some questions about the data. Specifically, we will study the distribution of the individual columns as well as try to understand the relationship between pairs of variables. For instance, are players attempting and making more three point shots now than they did 10 years ago?</p>
<p>Throughout the week, we will be using the popular <a href="https://ggplot2.tidyverse.org"><code>ggplot2</code></a> package (again created by Hadley Wickham and a member of the <code>tidyverse</code>) for all of our data visualizations. The <code>gg</code> stands for the <strong>grammar of graphics</strong>, an intuitive framework for data visualization. Given a dataset, such as <code>raw_shooting</code>, we want to map the columns to certain <strong>aesthetics</strong> of a visualization, such as the x-axis, y-axis, size, color, etc. Then a geometric object is used to represent the aesthetics visually such as a barchart or scatterplot. This framework separates the process of visualization into different components: data, aesthetic mappings, and geometric objects. These components are then added together (or <strong>layered</strong>) to produce the final graph. The <code>ggplot2</code> package is the most popular implementation of the <strong>grammar of graphics</strong> and is relatively easy to use.</p>
<p>As you saw in Prof. Wyner’s lectures, histograms are a powerful way to describe a single dataset. Let’s start with making a histogram of field-goal percentage (FGP). To do so with <code>ggplot2</code>, we start by telling <code>R</code> which <code>tbl</code> we want to use as the data for the plot. This is done using the <code>ggplot()</code> function:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> raw_shooting)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/shooting_hist-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>As you can see, nothing is displayed! That’s because we’ve just initialized the dataset to be used for creating the plot. Next, we need to map variables/columns from the data to <strong>aesthetics</strong>/properties of the plot. Examples include:</p>
<ul>
<li><code>x</code>: the variable that will be on the x-axis</li>
<li><code>y</code>: the variable that will be on the y-axis</li>
<li><code>color</code>: the variable that categorizes data by color</li>
<li><code>shape</code>: the variable that categorizes data by shape</li>
</ul>
<p>For the histogram, we map FGP to the <code>x</code> aesthetic with the <code>aes()</code> functions, displaying values of FGP along the x-axis:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> raw_shooting, <span class="kw">aes</span>(<span class="dt">x =</span> FGP))</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/shooting_hist_x-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Now we can see an axis for FGP, but still no histogram! That’s because we need to <strong>add</strong> the geometric layer of the histogram to the plot. The various geometric objects available in <code>ggplot2</code> are referred to as <code>geom</code>s, and these ultimately determine the type of play that will be created. Examples include:</p>
<ul>
<li><code>geom_point()</code>: creates a scatterplot</li>
<li><code>geom_histogram()</code>: creates a histogram</li>
<li><code>geom_line()</code>: creates a line</li>
<li><code>geom_boxplot()</code>: creates a boxplot</li>
</ul>
<p>To display the FGP histogram, we will simply add the <code>geom_histogram()</code> layer to the plot using the <code>+</code> operator:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> raw_shooting, <span class="kw">aes</span>(<span class="dt">x =</span> FGP)) <span class="op">+</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_histogram</span>()</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="st">`</span><span class="dt">stat_bin()</span><span class="st">`</span> using <span class="st">`</span><span class="dt">bins = 30</span><span class="st">`</span>. Pick better value with <span class="st">`</span><span class="dt">binwidth</span><span class="st">`</span>.</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/shooting_hist_x_geom-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>And of course, we can equivalently generate the same figure by <strong>piping</strong> our dataset into the <code>ggplot</code> function. The remaining examples will use the pipe operator <code>%&gt;%</code> for the remainder of this week, emphasizing how you can manipulate the <code>tbl</code> with various other functions prior to displaying the data:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> FGP)) <span class="op">+</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_histogram</span>()</span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="st">`</span><span class="dt">stat_bin()</span><span class="st">`</span> using <span class="st">`</span><span class="dt">bins = 30</span><span class="st">`</span>. Pick better value with <span class="st">`</span><span class="dt">binwidth</span><span class="st">`</span>.</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/pipe_shooting_hist_x_geom-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Each <code>geom</code> has it various attributes that can be modified whether by mapping variables with <code>aes</code> or <em>global</em> settings that affects the final displayed plot. A common problem faced with histograms is determining the width of the bins or number of bins - how much smoothing do we want of the data? You might have noticed that by default <code>geom_histogram</code> is using 30 bins and prints out a message for us about this decision. We can easily modify the number of bins in the <code>geom_histogram</code> function using the <code>bins</code> argument:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> FGP)) <span class="op">+</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">50</span>)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/shooting_hist_nbins-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Or we directly specify the width of the bins reflecting the range of FGP included in each bin using <code>binwidth</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> FGP)) <span class="op">+</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="fl">0.05</span>)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/shooting_hist_binwidth-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><strong>Now you should spend time making histograms of FTP and TPP, and other variables created in code above. Discuss the differences with others.</strong></p>
</div>
<div id="filtering" class="section level2">
<h2>Filtering</h2>
<p>By this point, it should be clear that there are a number of rather curious features in our dataset. For instance, there seem to be several players who have never made a field goal but have made every one of their free throw attempts. As it turns out, we have several players who have attempted fewer than 5 field goals in a single season. We’d like to remove all of the players who have not attempted a considerable number of field goal attempts and three point attempts in order to understand how the rate and efficiency of three point shots has changed over time.</p>
<p>The <code>filter()</code> function is used to pull out subsets of observations that satisfy some logical condition like <code>FGA &gt; 100</code> or <code>FGA &gt; 100</code> and <code>FTA &gt; 50</code>. To make such comparisons in R, we have the following operators available at our disposal:</p>
<ul>
<li><code>==</code> for “equal to”</li>
<li><code>!=</code> for “not equal to”</li>
<li><code>&lt;</code> and <code>&lt;=</code> for “less than” and “less than or equal to”</li>
<li><code>&gt;</code> and <code>&gt;=</code> for “greater than” and “greater than or equal to”</li>
<li><code>&amp;</code>, <code>|</code>, <code>!</code> for “AND” and “OR” and “NOT”</li>
</ul>
<p>The code below filter out all of the players with at least 100 field goals in a single season</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(FGA <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span>)</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co"># A tibble: 6,295 x 14</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>   PLAYER         SEASON   FGM   FGA   TPM   TPA   FTM   FTA   FGP   TPP   FTP  eFGP   PTS   TSP</span>
<span id="cb9-5"><a href="#cb9-5"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">           </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="st"> </span><span class="dv">1</span> Chris Wilcox     <span class="dv">2013</span>   <span class="dv">110</span>   <span class="dv">153</span>     <span class="dv">0</span>     <span class="dv">1</span>    <span class="dv">39</span>    <span class="dv">58</span> <span class="fl">0.719</span> <span class="dv">0</span>     <span class="fl">0.672</span> <span class="fl">0.719</span>   <span class="dv">259</span> <span class="fl">0.725</span></span>
<span id="cb9-7"><a href="#cb9-7"></a> <span class="dv">2</span> Tyson Chandler   <span class="dv">2012</span>   <span class="dv">241</span>   <span class="dv">355</span>     <span class="dv">0</span>     <span class="dv">2</span>   <span class="dv">217</span>   <span class="dv">315</span> <span class="fl">0.679</span> <span class="dv">0</span>     <span class="fl">0.689</span> <span class="fl">0.679</span>   <span class="dv">699</span> <span class="fl">0.708</span></span>
<span id="cb9-8"><a href="#cb9-8"></a> <span class="dv">3</span> Kyle Korver      <span class="dv">2015</span>   <span class="dv">292</span>   <span class="dv">600</span>   <span class="dv">221</span>   <span class="dv">449</span>   <span class="dv">106</span>   <span class="dv">118</span> <span class="fl">0.487</span> <span class="fl">0.492</span> <span class="fl">0.898</span> <span class="fl">0.671</span>   <span class="dv">911</span> <span class="fl">0.699</span></span>
<span id="cb9-9"><a href="#cb9-9"></a> <span class="dv">4</span> Steve Novak      <span class="dv">2012</span>   <span class="dv">161</span>   <span class="dv">337</span>   <span class="dv">133</span>   <span class="dv">282</span>    <span class="dv">22</span>    <span class="dv">26</span> <span class="fl">0.478</span> <span class="fl">0.472</span> <span class="fl">0.846</span> <span class="fl">0.675</span>   <span class="dv">477</span> <span class="fl">0.684</span></span>
<span id="cb9-10"><a href="#cb9-10"></a> <span class="dv">5</span> Chris Andersen   <span class="dv">2014</span>   <span class="dv">177</span>   <span class="dv">275</span>     <span class="dv">3</span>    <span class="dv">12</span>   <span class="dv">120</span>   <span class="dv">169</span> <span class="fl">0.644</span> <span class="fl">0.25</span>  <span class="fl">0.710</span> <span class="fl">0.649</span>   <span class="dv">477</span> <span class="fl">0.683</span></span>
<span id="cb9-11"><a href="#cb9-11"></a> <span class="dv">6</span> Jeremy Evans     <span class="dv">2011</span>    <span class="dv">76</span>   <span class="dv">115</span>     <span class="dv">0</span>     <span class="dv">1</span>    <span class="dv">26</span>    <span class="dv">37</span> <span class="fl">0.661</span> <span class="dv">0</span>     <span class="fl">0.703</span> <span class="fl">0.661</span>   <span class="dv">178</span> <span class="fl">0.678</span></span>
<span id="cb9-12"><a href="#cb9-12"></a> <span class="dv">7</span> Carlos Rogers    <span class="dv">2001</span>    <span class="dv">75</span>   <span class="dv">110</span>     <span class="dv">0</span>     <span class="dv">1</span>    <span class="dv">29</span>    <span class="dv">52</span> <span class="fl">0.682</span> <span class="dv">0</span>     <span class="fl">0.558</span> <span class="fl">0.682</span>   <span class="dv">179</span> <span class="fl">0.674</span></span>
<span id="cb9-13"><a href="#cb9-13"></a> <span class="dv">8</span> Mason Plumlee    <span class="dv">2014</span>   <span class="dv">199</span>   <span class="dv">302</span>     <span class="dv">0</span>     <span class="dv">3</span>   <span class="dv">122</span>   <span class="dv">195</span> <span class="fl">0.659</span> <span class="dv">0</span>     <span class="fl">0.626</span> <span class="fl">0.659</span>   <span class="dv">520</span> <span class="fl">0.670</span></span>
<span id="cb9-14"><a href="#cb9-14"></a> <span class="dv">9</span> Stephen Curry    <span class="dv">2016</span>   <span class="dv">805</span>  <span class="dv">1597</span>   <span class="dv">402</span>   <span class="dv">887</span>   <span class="dv">363</span>   <span class="dv">400</span> <span class="fl">0.504</span> <span class="fl">0.453</span> <span class="fl">0.908</span> <span class="fl">0.630</span>  <span class="dv">2375</span> <span class="fl">0.670</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="dv">10</span> Brent Barry      <span class="dv">2004</span>   <span class="dv">215</span>   <span class="dv">427</span>   <span class="dv">114</span>   <span class="dv">252</span>    <span class="dv">91</span>   <span class="dv">110</span> <span class="fl">0.504</span> <span class="fl">0.452</span> <span class="fl">0.827</span> <span class="fl">0.637</span>   <span class="dv">635</span> <span class="fl">0.668</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co"># … with 6,285 more rows</span></span></code></pre></div>
<p>When we run this code, you’ll notice that R prints out a <code>tbl</code> with 6,295 rows.</p>
<p>We can also filter on more complicated conditions constructed using the AND, OR, and NOT operators: <code>&amp;</code>, <code>|</code>, and <code>!</code>. For instance, to filter observations with at least 100 field goal attempts OR 50 three point attempts, we would do</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(FGA <span class="op">&gt;=</span><span class="st"> </span><span class="dv">100</span> <span class="op">|</span><span class="st"> </span>TPA <span class="op">&gt;=</span><span class="st"> </span><span class="dv">50</span>)</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co"># A tibble: 6,328 x 14</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>   PLAYER         SEASON   FGM   FGA   TPM   TPA   FTM   FTA   FGP   TPP   FTP  eFGP   PTS   TSP</span>
<span id="cb10-5"><a href="#cb10-5"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">           </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="st"> </span><span class="dv">1</span> Chris Wilcox     <span class="dv">2013</span>   <span class="dv">110</span>   <span class="dv">153</span>     <span class="dv">0</span>     <span class="dv">1</span>    <span class="dv">39</span>    <span class="dv">58</span> <span class="fl">0.719</span> <span class="dv">0</span>     <span class="fl">0.672</span> <span class="fl">0.719</span>   <span class="dv">259</span> <span class="fl">0.725</span></span>
<span id="cb10-7"><a href="#cb10-7"></a> <span class="dv">2</span> Tyson Chandler   <span class="dv">2012</span>   <span class="dv">241</span>   <span class="dv">355</span>     <span class="dv">0</span>     <span class="dv">2</span>   <span class="dv">217</span>   <span class="dv">315</span> <span class="fl">0.679</span> <span class="dv">0</span>     <span class="fl">0.689</span> <span class="fl">0.679</span>   <span class="dv">699</span> <span class="fl">0.708</span></span>
<span id="cb10-8"><a href="#cb10-8"></a> <span class="dv">3</span> Kyle Korver      <span class="dv">2015</span>   <span class="dv">292</span>   <span class="dv">600</span>   <span class="dv">221</span>   <span class="dv">449</span>   <span class="dv">106</span>   <span class="dv">118</span> <span class="fl">0.487</span> <span class="fl">0.492</span> <span class="fl">0.898</span> <span class="fl">0.671</span>   <span class="dv">911</span> <span class="fl">0.699</span></span>
<span id="cb10-9"><a href="#cb10-9"></a> <span class="dv">4</span> Steve Novak      <span class="dv">2012</span>   <span class="dv">161</span>   <span class="dv">337</span>   <span class="dv">133</span>   <span class="dv">282</span>    <span class="dv">22</span>    <span class="dv">26</span> <span class="fl">0.478</span> <span class="fl">0.472</span> <span class="fl">0.846</span> <span class="fl">0.675</span>   <span class="dv">477</span> <span class="fl">0.684</span></span>
<span id="cb10-10"><a href="#cb10-10"></a> <span class="dv">5</span> Chris Andersen   <span class="dv">2014</span>   <span class="dv">177</span>   <span class="dv">275</span>     <span class="dv">3</span>    <span class="dv">12</span>   <span class="dv">120</span>   <span class="dv">169</span> <span class="fl">0.644</span> <span class="fl">0.25</span>  <span class="fl">0.710</span> <span class="fl">0.649</span>   <span class="dv">477</span> <span class="fl">0.683</span></span>
<span id="cb10-11"><a href="#cb10-11"></a> <span class="dv">6</span> Jeremy Evans     <span class="dv">2011</span>    <span class="dv">76</span>   <span class="dv">115</span>     <span class="dv">0</span>     <span class="dv">1</span>    <span class="dv">26</span>    <span class="dv">37</span> <span class="fl">0.661</span> <span class="dv">0</span>     <span class="fl">0.703</span> <span class="fl">0.661</span>   <span class="dv">178</span> <span class="fl">0.678</span></span>
<span id="cb10-12"><a href="#cb10-12"></a> <span class="dv">7</span> Carlos Rogers    <span class="dv">2001</span>    <span class="dv">75</span>   <span class="dv">110</span>     <span class="dv">0</span>     <span class="dv">1</span>    <span class="dv">29</span>    <span class="dv">52</span> <span class="fl">0.682</span> <span class="dv">0</span>     <span class="fl">0.558</span> <span class="fl">0.682</span>   <span class="dv">179</span> <span class="fl">0.674</span></span>
<span id="cb10-13"><a href="#cb10-13"></a> <span class="dv">8</span> Brian Cardinal   <span class="dv">2011</span>    <span class="dv">43</span>   <span class="dv">100</span>    <span class="dv">42</span>    <span class="dv">87</span>    <span class="dv">17</span>    <span class="dv">18</span> <span class="fl">0.43</span>  <span class="fl">0.483</span> <span class="fl">0.944</span> <span class="fl">0.64</span>    <span class="dv">145</span> <span class="fl">0.672</span></span>
<span id="cb10-14"><a href="#cb10-14"></a> <span class="dv">9</span> Mason Plumlee    <span class="dv">2014</span>   <span class="dv">199</span>   <span class="dv">302</span>     <span class="dv">0</span>     <span class="dv">3</span>   <span class="dv">122</span>   <span class="dv">195</span> <span class="fl">0.659</span> <span class="dv">0</span>     <span class="fl">0.626</span> <span class="fl">0.659</span>   <span class="dv">520</span> <span class="fl">0.670</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="dv">10</span> Stephen Curry    <span class="dv">2016</span>   <span class="dv">805</span>  <span class="dv">1597</span>   <span class="dv">402</span>   <span class="dv">887</span>   <span class="dv">363</span>   <span class="dv">400</span> <span class="fl">0.504</span> <span class="fl">0.453</span> <span class="fl">0.908</span> <span class="fl">0.630</span>  <span class="dv">2375</span> <span class="fl">0.670</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co"># … with 6,318 more rows</span></span></code></pre></div>
<p>We may combine these constraints by enclosing them in parantheses.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>((FGA <span class="op">&gt;=</span><span class="st"> </span><span class="dv">100</span> <span class="op">&amp;</span><span class="st"> </span>TPA <span class="op">&gt;=</span><span class="st"> </span><span class="dv">50</span>) <span class="op">|</span><span class="st"> </span>(FGP <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.45</span> <span class="op">&amp;</span><span class="st"> </span>FGP <span class="op">&lt;=</span><span class="st"> </span><span class="fl">0.5</span>))</span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="co"># A tibble: 4,837 x 14</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>   PLAYER                SEASON   FGM   FGA   TPM   TPA   FTM   FTA   FGP   TPP   FTP  eFGP   PTS   TSP</span>
<span id="cb11-5"><a href="#cb11-5"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="st"> </span><span class="dv">1</span> Keith Bogans            <span class="dv">2014</span>     <span class="dv">3</span>     <span class="dv">6</span>     <span class="dv">3</span>     <span class="dv">6</span>     <span class="dv">3</span>     <span class="dv">3</span> <span class="fl">0.5</span>   <span class="fl">0.5</span>   <span class="dv">1</span>     <span class="fl">0.75</span>     <span class="dv">12</span> <span class="fl">0.820</span></span>
<span id="cb11-7"><a href="#cb11-7"></a> <span class="dv">2</span> Kyle Korver             <span class="dv">2015</span>   <span class="dv">292</span>   <span class="dv">600</span>   <span class="dv">221</span>   <span class="dv">449</span>   <span class="dv">106</span>   <span class="dv">118</span> <span class="fl">0.487</span> <span class="fl">0.492</span> <span class="fl">0.898</span> <span class="fl">0.671</span>   <span class="dv">911</span> <span class="fl">0.699</span></span>
<span id="cb11-8"><a href="#cb11-8"></a> <span class="dv">3</span> Aleksandar Djordjevic   <span class="dv">1997</span>     <span class="dv">8</span>    <span class="dv">16</span>     <span class="dv">5</span>     <span class="dv">7</span>     <span class="dv">4</span>     <span class="dv">5</span> <span class="fl">0.5</span>   <span class="fl">0.714</span> <span class="fl">0.8</span>   <span class="fl">0.656</span>    <span class="dv">25</span> <span class="fl">0.687</span></span>
<span id="cb11-9"><a href="#cb11-9"></a> <span class="dv">4</span> Steve Novak             <span class="dv">2012</span>   <span class="dv">161</span>   <span class="dv">337</span>   <span class="dv">133</span>   <span class="dv">282</span>    <span class="dv">22</span>    <span class="dv">26</span> <span class="fl">0.478</span> <span class="fl">0.472</span> <span class="fl">0.846</span> <span class="fl">0.675</span>   <span class="dv">477</span> <span class="fl">0.684</span></span>
<span id="cb11-10"><a href="#cb11-10"></a> <span class="dv">5</span> Brian Cardinal          <span class="dv">2011</span>    <span class="dv">43</span>   <span class="dv">100</span>    <span class="dv">42</span>    <span class="dv">87</span>    <span class="dv">17</span>    <span class="dv">18</span> <span class="fl">0.43</span>  <span class="fl">0.483</span> <span class="fl">0.944</span> <span class="fl">0.64</span>    <span class="dv">145</span> <span class="fl">0.672</span></span>
<span id="cb11-11"><a href="#cb11-11"></a> <span class="dv">6</span> Stephen Curry           <span class="dv">2016</span>   <span class="dv">805</span>  <span class="dv">1597</span>   <span class="dv">402</span>   <span class="dv">887</span>   <span class="dv">363</span>   <span class="dv">400</span> <span class="fl">0.504</span> <span class="fl">0.453</span> <span class="fl">0.908</span> <span class="fl">0.630</span>  <span class="dv">2375</span> <span class="fl">0.670</span></span>
<span id="cb11-12"><a href="#cb11-12"></a> <span class="dv">7</span> Brent Barry             <span class="dv">2004</span>   <span class="dv">215</span>   <span class="dv">427</span>   <span class="dv">114</span>   <span class="dv">252</span>    <span class="dv">91</span>   <span class="dv">110</span> <span class="fl">0.504</span> <span class="fl">0.452</span> <span class="fl">0.827</span> <span class="fl">0.637</span>   <span class="dv">635</span> <span class="fl">0.668</span></span>
<span id="cb11-13"><a href="#cb11-13"></a> <span class="dv">8</span> Manu Ginobili           <span class="dv">2012</span>   <span class="dv">150</span>   <span class="dv">285</span>    <span class="dv">52</span>   <span class="dv">126</span>    <span class="dv">88</span>   <span class="dv">101</span> <span class="fl">0.526</span> <span class="fl">0.413</span> <span class="fl">0.871</span> <span class="fl">0.618</span>   <span class="dv">440</span> <span class="fl">0.668</span></span>
<span id="cb11-14"><a href="#cb11-14"></a> <span class="dv">9</span> Steve Kerr              <span class="dv">1997</span>   <span class="dv">249</span>   <span class="dv">467</span>   <span class="dv">110</span>   <span class="dv">237</span>    <span class="dv">54</span>    <span class="dv">67</span> <span class="fl">0.533</span> <span class="fl">0.464</span> <span class="fl">0.806</span> <span class="fl">0.651</span>   <span class="dv">662</span> <span class="fl">0.667</span></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="dv">10</span> Brent Barry             <span class="dv">2007</span>   <span class="dv">202</span>   <span class="dv">425</span>   <span class="dv">128</span>   <span class="dv">287</span>   <span class="dv">103</span>   <span class="dv">117</span> <span class="fl">0.475</span> <span class="fl">0.446</span> <span class="fl">0.880</span> <span class="fl">0.626</span>   <span class="dv">635</span> <span class="fl">0.666</span></span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="co"># … with 4,827 more rows</span></span></code></pre></div>
<p>What if we wanted to pull out the observations corresponding to the 2015-16 and 2014-15 season? We could do something like <code>filter(raw_shooting, (SEASON == 2016) | (SEASON == 2015))</code>, which would be perfectly fine. However, what if we wanted data from 1998-99, 2011-12, and 2015-16? Typing a lot of expressions like <code>SEASON == ...</code> would be rather tedious. The <code>%in%</code> operator lets us avoid this tedium:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>, <span class="dv">2016</span>))</span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="co"># A tibble: 1,150 x 14</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>   PLAYER          SEASON   FGM   FGA   TPM   TPA   FTM   FTA   FGP   TPP   FTP  eFGP   PTS   TSP</span>
<span id="cb12-5"><a href="#cb12-5"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">            </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="st"> </span><span class="dv">1</span> Tyson Wheeler     <span class="dv">1999</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">2</span> <span class="dv">1</span>     <span class="dv">1</span>     <span class="fl">0.5</span>   <span class="fl">1.5</span>       <span class="dv">4</span> <span class="fl">1.06</span> </span>
<span id="cb12-7"><a href="#cb12-7"></a> <span class="dv">2</span> Tyson Chandler    <span class="dv">2012</span>   <span class="dv">241</span>   <span class="dv">355</span>     <span class="dv">0</span>     <span class="dv">2</span>   <span class="dv">217</span>   <span class="dv">315</span> <span class="fl">0.679</span> <span class="dv">0</span>     <span class="fl">0.689</span> <span class="fl">0.679</span>   <span class="dv">699</span> <span class="fl">0.708</span></span>
<span id="cb12-8"><a href="#cb12-8"></a> <span class="dv">3</span> Jorge Gutierrez   <span class="dv">2016</span>     <span class="dv">6</span>    <span class="dv">11</span>     <span class="dv">0</span>     <span class="dv">2</span>    <span class="dv">10</span>    <span class="dv">11</span> <span class="fl">0.545</span> <span class="dv">0</span>     <span class="fl">0.909</span> <span class="fl">0.545</span>    <span class="dv">22</span> <span class="fl">0.694</span></span>
<span id="cb12-9"><a href="#cb12-9"></a> <span class="dv">4</span> Steve Novak       <span class="dv">2012</span>   <span class="dv">161</span>   <span class="dv">337</span>   <span class="dv">133</span>   <span class="dv">282</span>    <span class="dv">22</span>    <span class="dv">26</span> <span class="fl">0.478</span> <span class="fl">0.472</span> <span class="fl">0.846</span> <span class="fl">0.675</span>   <span class="dv">477</span> <span class="fl">0.684</span></span>
<span id="cb12-10"><a href="#cb12-10"></a> <span class="dv">5</span> Sam Jacobson      <span class="dv">1999</span>     <span class="dv">3</span>     <span class="dv">5</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">2</span>     <span class="dv">2</span> <span class="fl">0.6</span>   <span class="dv">0</span>     <span class="dv">1</span>     <span class="fl">0.6</span>       <span class="dv">8</span> <span class="fl">0.680</span></span>
<span id="cb12-11"><a href="#cb12-11"></a> <span class="dv">6</span> Stephen Curry     <span class="dv">2016</span>   <span class="dv">805</span>  <span class="dv">1597</span>   <span class="dv">402</span>   <span class="dv">887</span>   <span class="dv">363</span>   <span class="dv">400</span> <span class="fl">0.504</span> <span class="fl">0.453</span> <span class="fl">0.908</span> <span class="fl">0.630</span>  <span class="dv">2375</span> <span class="fl">0.670</span></span>
<span id="cb12-12"><a href="#cb12-12"></a> <span class="dv">7</span> Manu Ginobili     <span class="dv">2012</span>   <span class="dv">150</span>   <span class="dv">285</span>    <span class="dv">52</span>   <span class="dv">126</span>    <span class="dv">88</span>   <span class="dv">101</span> <span class="fl">0.526</span> <span class="fl">0.413</span> <span class="fl">0.871</span> <span class="fl">0.618</span>   <span class="dv">440</span> <span class="fl">0.668</span></span>
<span id="cb12-13"><a href="#cb12-13"></a> <span class="dv">8</span> James Harden      <span class="dv">2012</span>   <span class="dv">309</span>   <span class="dv">629</span>   <span class="dv">114</span>   <span class="dv">292</span>   <span class="dv">312</span>   <span class="dv">369</span> <span class="fl">0.491</span> <span class="fl">0.390</span> <span class="fl">0.846</span> <span class="fl">0.582</span>  <span class="dv">1044</span> <span class="fl">0.660</span></span>
<span id="cb12-14"><a href="#cb12-14"></a> <span class="dv">9</span> Steve Novak       <span class="dv">2016</span>     <span class="dv">8</span>    <span class="dv">18</span>     <span class="dv">7</span>    <span class="dv">15</span>     <span class="dv">1</span>     <span class="dv">1</span> <span class="fl">0.444</span> <span class="fl">0.467</span> <span class="dv">1</span>     <span class="fl">0.639</span>    <span class="dv">24</span> <span class="fl">0.651</span></span>
<span id="cb12-15"><a href="#cb12-15"></a><span class="dv">10</span> Brad Miller       <span class="dv">1999</span>    <span class="dv">78</span>   <span class="dv">138</span>     <span class="dv">1</span>     <span class="dv">2</span>    <span class="dv">81</span>   <span class="dv">102</span> <span class="fl">0.565</span> <span class="fl">0.5</span>   <span class="fl">0.794</span> <span class="fl">0.569</span>   <span class="dv">238</span> <span class="fl">0.651</span></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="co"># … with 1,140 more rows</span></span></code></pre></div>
<p>We could also filter out data from the two lockout-shortened seasons, 1998-99 and 2011-12 using a combination of the NOT <code>!</code> operator and <code>%in%</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span>SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>))</span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co"># A tibble: 6,721 x 14</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>   PLAYER                SEASON   FGM   FGA   TPM   TPA   FTM   FTA   FGP   TPP   FTP  eFGP   PTS   TSP</span>
<span id="cb13-5"><a href="#cb13-5"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="st"> </span><span class="dv">1</span> Dajuan Wagner           <span class="dv">2007</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">2</span> <span class="dv">1</span>     <span class="dv">1</span>     <span class="fl">0.5</span>   <span class="fl">1.5</span>       <span class="dv">4</span> <span class="fl">1.06</span> </span>
<span id="cb13-7"><a href="#cb13-7"></a> <span class="dv">2</span> Amir Johnson            <span class="dv">2006</span>     <span class="dv">7</span>    <span class="dv">10</span>     <span class="dv">2</span>     <span class="dv">3</span>     <span class="dv">4</span>     <span class="dv">4</span> <span class="fl">0.7</span>   <span class="fl">0.667</span> <span class="dv">1</span>     <span class="fl">0.8</span>      <span class="dv">20</span> <span class="fl">0.850</span></span>
<span id="cb13-8"><a href="#cb13-8"></a> <span class="dv">3</span> Keith Bogans            <span class="dv">2014</span>     <span class="dv">3</span>     <span class="dv">6</span>     <span class="dv">3</span>     <span class="dv">6</span>     <span class="dv">3</span>     <span class="dv">3</span> <span class="fl">0.5</span>   <span class="fl">0.5</span>   <span class="dv">1</span>     <span class="fl">0.75</span>     <span class="dv">12</span> <span class="fl">0.820</span></span>
<span id="cb13-9"><a href="#cb13-9"></a> <span class="dv">4</span> Steve Novak             <span class="dv">2011</span>    <span class="dv">35</span>    <span class="dv">67</span>    <span class="dv">26</span>    <span class="dv">46</span>     <span class="dv">8</span>     <span class="dv">8</span> <span class="fl">0.522</span> <span class="fl">0.565</span> <span class="dv">1</span>     <span class="fl">0.716</span>   <span class="dv">104</span> <span class="fl">0.737</span></span>
<span id="cb13-10"><a href="#cb13-10"></a> <span class="dv">5</span> Chris Crawford          <span class="dv">2003</span>     <span class="dv">8</span>    <span class="dv">13</span>     <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">7</span>     <span class="dv">8</span> <span class="fl">0.615</span> <span class="fl">0.333</span> <span class="fl">0.875</span> <span class="fl">0.654</span>    <span class="dv">24</span> <span class="fl">0.726</span></span>
<span id="cb13-11"><a href="#cb13-11"></a> <span class="dv">6</span> Chris Wilcox            <span class="dv">2013</span>   <span class="dv">110</span>   <span class="dv">153</span>     <span class="dv">0</span>     <span class="dv">1</span>    <span class="dv">39</span>    <span class="dv">58</span> <span class="fl">0.719</span> <span class="dv">0</span>     <span class="fl">0.672</span> <span class="fl">0.719</span>   <span class="dv">259</span> <span class="fl">0.725</span></span>
<span id="cb13-12"><a href="#cb13-12"></a> <span class="dv">7</span> Maceo Baston            <span class="dv">2007</span>    <span class="dv">49</span>    <span class="dv">76</span>     <span class="dv">3</span>     <span class="dv">7</span>    <span class="dv">37</span>    <span class="dv">47</span> <span class="fl">0.645</span> <span class="fl">0.429</span> <span class="fl">0.787</span> <span class="fl">0.664</span>   <span class="dv">138</span> <span class="fl">0.714</span></span>
<span id="cb13-13"><a href="#cb13-13"></a> <span class="dv">8</span> Kyle Korver             <span class="dv">2015</span>   <span class="dv">292</span>   <span class="dv">600</span>   <span class="dv">221</span>   <span class="dv">449</span>   <span class="dv">106</span>   <span class="dv">118</span> <span class="fl">0.487</span> <span class="fl">0.492</span> <span class="fl">0.898</span> <span class="fl">0.671</span>   <span class="dv">911</span> <span class="fl">0.699</span></span>
<span id="cb13-14"><a href="#cb13-14"></a> <span class="dv">9</span> Jorge Gutierrez         <span class="dv">2016</span>     <span class="dv">6</span>    <span class="dv">11</span>     <span class="dv">0</span>     <span class="dv">2</span>    <span class="dv">10</span>    <span class="dv">11</span> <span class="fl">0.545</span> <span class="dv">0</span>     <span class="fl">0.909</span> <span class="fl">0.545</span>    <span class="dv">22</span> <span class="fl">0.694</span></span>
<span id="cb13-15"><a href="#cb13-15"></a><span class="dv">10</span> Aleksandar Djordjevic   <span class="dv">1997</span>     <span class="dv">8</span>    <span class="dv">16</span>     <span class="dv">5</span>     <span class="dv">7</span>     <span class="dv">4</span>     <span class="dv">5</span> <span class="fl">0.5</span>   <span class="fl">0.714</span> <span class="fl">0.8</span>   <span class="fl">0.656</span>    <span class="dv">25</span> <span class="fl">0.687</span></span>
<span id="cb13-16"><a href="#cb13-16"></a><span class="co"># … with 6,711 more rows</span></span></code></pre></div>
<p>For the remainder of this module, we will focus on the non-lockout seasons (ie <code>!SEASON %in% c(1999, 2012, 2016)</code>) but we still need to determine a cutoff for FGA and TPA. Let’s start by making histograms of the two variables to see their individual distributions, and rather than creating a new temporary <code>tbl</code> we’ll take advantage of the <code>%&gt;%</code>. First for FGA,</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span>SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> FGA)) <span class="op">+</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">50</span>)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/fga-hist-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>And now for TPA,</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span>SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> TPA)) <span class="op">+</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">25</span>)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/tpa-hist-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>It might not make sense however to make a cutoff for FGA and TPA without considering their relationship.</p>
</div>
<div id="bivariate-plots-for-continuous-data" class="section level2">
<h2>Bivariate plots for continuous data</h2>
<p>We can proceed to view the <strong>joint</strong> distribution of FGA and TPA, the relationship between the two variables, by displaying a scatterplot of the data. Obviously, as TPA increases the FGA will increase (since FGA is the sum of TPA and number of two-point attempts). We create a scatterplot by mapping multiple variables to <code>x</code> and <code>y</code>, and use <code>geom_point</code> to display the desired geometric object of points instead of <code>geom_histogram</code> from before.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span>SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> TPA, <span class="dt">y =</span> FGA)) <span class="op">+</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/scatter-fga-tpa-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Immediately, we notice a few things about the figure. First, we see the clear relationship between TPA and FGA - where where TPA provides the lower threshold on FGA (remember why is this expected). We also see what appears to be a group of points with a smaller number of three-point attempts displaying a range in values for FGA, while a main block of points shows an clear increasing relationship. A major drawback of this scatterplot is its inability to show the relative density of points. For instance, all we see is a solid black mass for the lower range of values for both TPA and FGA - making it hard to determine where an appropriate cutoff should be made.</p>
<p>One way to address this is to use <em>alpha-blending</em> to change the transparency of each point. When there are many points plotted in the same region, that region will appear darker. Just like <code>binwidth</code> or <code>bins</code> for <code>geom_histogram</code>, <code>geom_point</code> has settings we can change such as the <code>alpha</code> setting in this case which ranges from 0 (completely transparent) to 1 (solid and opaque, the default).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span>SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> TPA, <span class="dt">y =</span> FGA)) <span class="op">+</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/scatterplot-alpha-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Now we have a much better idea of where the majority of points are, with a clear group of players displaying a smaller number of TPA. Another type of plot commonly used in this situation is a <strong>heatmap</strong> which you can thnk of as a two-dimensional histogram. To form a heatmap, you start by dividing the coordinate plane into many evenly-sized two-dimensional bins and then count the number of points within each bin. You then color the bin according to the count. While you can conceptually make the bins any shape you want, there are two popular conventions: rectangular binning and hexagonal binning. For this plot, we will focus on rectangular binning, using the <code>geom_bin2d()</code> function.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span>SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> TPA, <span class="dt">y =</span> FGA)) <span class="op">+</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_bin2d</span>()</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/heatmap-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Now we have a color scale that has appeared to tell us the number of points in each bin. Just like histograms, we can increase the number of bins to get a much more high-resolution view of our data.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="op">&gt;</span><span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span>SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> TPA, <span class="dt">y =</span> FGA)) <span class="op">+</span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_bin2d</span>(<span class="dt">bins =</span> <span class="dv">100</span>)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/unnamed-chunk-1-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>In this example, using <code>geom_point</code> with lower values for <code>alpha</code> provides a clear interpretation for where to make the cutoff. Given the histograms we previously made for each variable as well, let’s use a cutoff of <code>TPA &gt; 50</code> and <code>FGA &gt; 150</code>. We can create the scatterplot as before but, to demonstrate a convenient feature of <code>ggplot2</code>, we’ll now assign the plot to a variable named <code>fga_tpa_plot</code>,</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="op">&gt;</span><span class="st"> </span>fga_tpa_plot &lt;-<span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span>SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> TPA, <span class="dt">y =</span> FGA)) <span class="op">+</span></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p>Notice how this code runs without displaying the plot. To display it we simply run <code>fga_tpa_plot</code> in the console and the plot appear,</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="op">&gt;</span><span class="st"> </span>fga_tpa_plot</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/unnamed-chunk-2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Now we’re going to annotate this plot with the cutoffs we’ve determined. To do so, we’re going to add a vertical line to provide the cutoff for the minimum value of TPA, and a horizontal line for the minimum value of FGA. Both of these can be accomplished using the <code>geom</code>s <code>geom_vline</code> and <code>geom_hline</code> where we specify for each the values for the intercepts to draw the lines at. Since we’ve stored the plot in <code>fga_tpa_plot</code>, we can add these layers with the <code>+</code> operator to <code>fga_tpa_plot</code> directly:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="op">&gt;</span><span class="st"> </span>fga_tpa_plot <span class="op">+</span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="op">+</span><span class="st">   </span><span class="co"># Add TPA cutoff</span></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">50</span>) <span class="op">+</span></span>
<span id="cb22-4"><a href="#cb22-4"></a><span class="op">+</span><span class="st">   </span><span class="co"># Add FGA cutoff</span></span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">150</span>)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/add-lines-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>This provides us with a good indication of what we’re cutting off, but we should distinguish these lines separately from the points more. Since these are both <code>geom</code>s with their own set of attributes, we’ll change the color and make the line type to be dashed,</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="op">&gt;</span><span class="st"> </span>fga_tpa_plot <span class="op">+</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="op">+</span><span class="st">   </span><span class="co"># Add TPA cutoff</span></span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">50</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="op">+</span></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="op">+</span><span class="st">   </span><span class="co"># Add FGA cutoff</span></span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">150</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/add-lines-color-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Although <code>ggplot2</code> automatically provides axis labels based on the variables we’ve mapped to the aesthetics in <code>aes</code>, we really need text describing what is shown in the plot. The easiest way to do this, is by adding a label layer with the <code>labs()</code> function. Using <code>labs</code>, you can provide it the same arguments as those inside <code>aes</code> as well as other parts of the plot to label such as the title, subtitle, and caption. We add appropriate labels to the plot above, with better descriptions for the axes, as well as an informative subtitle regarding the red-dashed lines:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="op">&gt;</span><span class="st"> </span>fga_tpa_plot <span class="op">+</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="op">+</span><span class="st">   </span><span class="co"># Add TPA cutoff</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">50</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="op">+</span></span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="op">+</span><span class="st">   </span><span class="co"># Add FGA cutoff</span></span>
<span id="cb24-5"><a href="#cb24-5"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">150</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="op">+</span></span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="op">+</span><span class="st">   </span><span class="co"># Add appropriate labels:</span></span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="op">+</span><span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Number of three point attempts (TPA)&quot;</span>,</span>
<span id="cb24-8"><a href="#cb24-8"></a><span class="op">+</span><span class="st">        </span><span class="dt">y =</span> <span class="st">&quot;Number of field goal attempts (FGA)&quot;</span>,</span>
<span id="cb24-9"><a href="#cb24-9"></a><span class="op">+</span><span class="st">        </span><span class="dt">title =</span> <span class="st">&quot;Scatterplot of FGA and TPA (excluding lockout seasons 1999 and 2012)&quot;</span>,</span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="op">+</span><span class="st">        </span><span class="dt">subtitle =</span> <span class="st">&quot;Red-dashed lines indicate cutoffs for TPA &gt; 50 and FGA &gt; 150&quot;</span>,</span>
<span id="cb24-11"><a href="#cb24-11"></a><span class="op">+</span><span class="st">        </span><span class="dt">caption =</span> <span class="st">&quot;Created by INSERT YOUR NAME HERE&quot;</span>)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/add-labels-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>As a reminder, the code chunk above is equivalent to running the entire pipeline of code without creating any temporary objects, although not recommended…</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/nba_shooting.csv&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span>SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>)) <span class="op">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> TPA, <span class="dt">y =</span> FGA)) <span class="op">+</span></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>) <span class="op">+</span></span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">50</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="op">+</span></span>
<span id="cb25-6"><a href="#cb25-6"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">150</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="op">+</span></span>
<span id="cb25-7"><a href="#cb25-7"></a><span class="op">+</span><span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Number of three point attempts (TPA)&quot;</span>,</span>
<span id="cb25-8"><a href="#cb25-8"></a><span class="op">+</span><span class="st">        </span><span class="dt">y =</span> <span class="st">&quot;Number of field goal attempts (FGA)&quot;</span>,</span>
<span id="cb25-9"><a href="#cb25-9"></a><span class="op">+</span><span class="st">        </span><span class="dt">title =</span> <span class="st">&quot;Scatterplot of FGA and TPA (excluding lockout seasons 1999 and 2012)&quot;</span>,</span>
<span id="cb25-10"><a href="#cb25-10"></a><span class="op">+</span><span class="st">        </span><span class="dt">subtitle =</span> <span class="st">&quot;Red-dashed lines indicate cutoffs for TPA &gt; 50 and FGA &gt; 150&quot;</span>,</span>
<span id="cb25-11"><a href="#cb25-11"></a><span class="op">+</span><span class="st">        </span><span class="dt">caption =</span> <span class="st">&quot;Created by INSERT YOUR NAME HERE&quot;</span>)</span>
<span id="cb25-12"><a href="#cb25-12"></a>Parsed with column specification<span class="op">:</span></span>
<span id="cb25-13"><a href="#cb25-13"></a><span class="kw">cols</span>(</span>
<span id="cb25-14"><a href="#cb25-14"></a>  <span class="dt">PLAYER =</span> <span class="kw">col_character</span>(),</span>
<span id="cb25-15"><a href="#cb25-15"></a>  <span class="dt">SEASON =</span> <span class="kw">col_double</span>(),</span>
<span id="cb25-16"><a href="#cb25-16"></a>  <span class="dt">FGM =</span> <span class="kw">col_double</span>(),</span>
<span id="cb25-17"><a href="#cb25-17"></a>  <span class="dt">FGA =</span> <span class="kw">col_double</span>(),</span>
<span id="cb25-18"><a href="#cb25-18"></a>  <span class="dt">TPM =</span> <span class="kw">col_double</span>(),</span>
<span id="cb25-19"><a href="#cb25-19"></a>  <span class="dt">TPA =</span> <span class="kw">col_double</span>(),</span>
<span id="cb25-20"><a href="#cb25-20"></a>  <span class="dt">FTM =</span> <span class="kw">col_double</span>(),</span>
<span id="cb25-21"><a href="#cb25-21"></a>  <span class="dt">FTA =</span> <span class="kw">col_double</span>()</span>
<span id="cb25-22"><a href="#cb25-22"></a>)</span></code></pre></div>
<p><img src="tc_lecture2_files/figure-html/full-pipeline-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="saving-our-work" class="section level2">
<h2>Saving our work</h2>
<p>For next <a href="tc_lecture3.html">lecture</a> we will focus on the dataset of players who attempted at least 150 field goals and 50 three pointers in the non-lockout seasons. We’ll make this <em>clean</em> dataset using the <code>filter()</code> function separating each condition with commas, and refer to the resulting dataset as <code>nba_shooting</code>. Finally, we’ll add a <code>mutate()</code> line to create the <code>three_point_fg_rate = TPA / FGA</code> variable from <a href="tc_lecture1.html">yesterday</a>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="op">&gt;</span><span class="st"> </span>nba_shooting &lt;-<span class="st"> </span>raw_shooting <span class="op">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="op">+</span><span class="st">   </span><span class="co"># Filter on the conditions</span></span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span>SEASON <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1999</span>, <span class="dv">2012</span>),</span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="op">+</span><span class="st">          </span>TPA <span class="op">&gt;</span><span class="st"> </span><span class="dv">50</span>,</span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="op">+</span><span class="st">          </span>FGA <span class="op">&gt;</span><span class="st"> </span><span class="dv">150</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-6"><a href="#cb26-6"></a><span class="op">+</span><span class="st">   </span><span class="co"># Create the three point attempt rate variable</span></span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">three_point_fg_rate =</span> TPA <span class="op">/</span><span class="st"> </span>FGA)</span></code></pre></div>
<p>While we can always re-run the commands used to produce this <code>tbl</code> from our script, when data analyses become more complicated, it is helpful to save these objects. <code>R</code> has its own special file format for efficiently saving data on your computer.</p>
<p>We will use the <code>save()</code> command.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">save</span>(nba_shooting, <span class="dt">file =</span> <span class="st">&quot;data/clean_nba_shooting.RData&quot;</span>)</span></code></pre></div>
<p>Then when we want to <em>load</em> the data back into R, we can use the <code>load()</code> function</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">load</span>(<span class="st">&quot;data/clean_nba_shooting.RData&quot;</span>)</span></code></pre></div>
<p>Next, proceed to practice this lecture’s lessons in <a href="tc_ps2.html">Problem Set 2</a>.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
