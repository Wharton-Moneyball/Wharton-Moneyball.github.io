<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Lecture 1: R Basics &amp; the Tidyverse</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><img id="logo" style="width: 200px;" src="figures/WMA_logo.png" /></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-sign-in"></span>
     
    Get Started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lecture0.html">Lecture 0</a>
    </li>
    <li>
      <a href="ps0.html">Problem Set 0</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-institution"></span>
     
    Academy
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lecture1.html">Lecture 1</a>
    </li>
    <li>
      <a href="lecture2.html">Lecture 2</a>
    </li>
    <li>
      <a href="lecture3.html">Lecture 3</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="ps2.html">Problem Set 2</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-dribbble"></span>
     
    Training Camp
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="tc_lecture1.html">Lecture 1</a>
    </li>
    <li>
      <a href="tc_lecture2.html">Lecture 2</a>
    </li>
    <li>
      <a href="tc_lecture3.html">Lecture 3</a>
    </li>
    <li>
      <a href="tc_lecture4.html">Lecture 4</a>
    </li>
    <li>
      <a href="tc_lecture5.html">Lecture 5</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="tc_ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="tc_ps2.html">Problem Set 2</a>
    </li>
    <li>
      <a href="tc_ps3.html">Problem Set 3</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="tc_lecture_data_sources.html">Data Sources Lecture</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Lecture 1: R Basics &amp; the
Tidyverse</h1>

</div>


<div id="setting-our-working-directory" class="section level2">
<h2>Setting our working directory</h2>
<p>The <em>working directory</em> is a really powerful concept in R – it
is where R saves any output files you create during an analysis and it
is the place where R looks for any data you want to read in. When you
installed R &amp; RStudio in <a href="lecture0.html">Lecture 0</a>, we
asked you to create a folder on your Desktop called Moneyball. This will
be your working directory for the duration of the course.</p>
<p>Every time you open RStudio, it automatically sets the working
directory to some default folder on your computer. To see what that is,
we’ll open RStudio and look at the console pane. We can also check our
working directory with the code <code>getwd()</code></p>
<p>Once we open RStudio, before we do anything, we need to tell R to
change the working directory to our Moneyball folder. We can do this in
a couple of ways:</p>
<ol style="list-style-type: decimal">
<li>In the top toolbar, Session/Set Working Directory/Choose Working
Directory allows us to select and set our working directory from our
files.<br />
</li>
<li>The code <code>setwd("~/Desktop/Moneyball")</code> sets our working
directory to the Moneyball folder, and can be edited for any file
location.</li>
</ol>
<p><strong>Important: for the next three weeks, every time you open up
RStudio, the first thing you should do is set your working directory to
the Moneyball folder.</strong></p>
</div>
<div id="base-r" class="section level2">
<h2>Base R</h2>
<p>Now that we have set our working directory, we can work with data.
The basic functionality included with R is called Base R. Simple
arithmetic such as <code>2*3</code> and <code>mean(3:9)</code> are
included as initial functionality in base R. We can also assign values
to vectors and plot graphs.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">10</span>,<span class="dv">14</span>,<span class="dv">15</span>,<span class="dv">18</span>,<span class="dv">20</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">plot</span>(x,y)</span></code></pre></div>
<p><img src="lecture1_files/figure-html/base%20R-1.png" width="672" style="display: block; margin: auto;" />
In the above code, we assigned the numbers 1-8 to x and assigned the
numbers 5, 7, …, 18, 20 to y. Then we plotted the graph with x and y, as
if they were coordinate points.</p>
<p>We did all that with Base R. However, the functionality provided by a
fresh install of R is only a small fraction of the computing power
available with R. Extra functionality comes from add-ons, or packages,
created by developers.</p>
</div>
<div id="packages" class="section level2">
<h2>Packages</h2>
<p>So far we have seen only the most basic of R’s functionality.
Arguably, one of the things that makes R so powerful is the ease with
which users are able to define their own functions and release them to
the public.As <a href="http://hadley.nz">Hadley Wickham</a> defines
them, “[R] packages are fundamental units of reproducible code. They
include reusable R functions, the documentation that describes how to
use them, and sample data.” As of June 18, 2020, there are 15,805
packages available from the <a
href="https://cran.r-project.org">Comprehensive R Archive Network
(CRAN)</a>. The scope of these packages is vast: there are some designed
for scraping data from the web, pre-processing data to get it into an
analyzable format, performing standard and specialized statistical
analyses, and to publish your results. People have also released
packages tailored to very specific applications like analyzing baseball
data. There are also some more whimsical packages, like one that allow
you to display your favorite <a href="https://xkcd.com">XKCD</a> comic
strip!</p>
<p>We can install packages in several ways:</p>
<ol style="list-style-type: decimal">
<li><p>In the top toolbar, Tools/Install Packages allows us to search
and install packages to our library.</p></li>
<li><p>In the bottom right pane, the Packages tab has an install button.
After clicking this button, we can search for and install a package and
its dependencies (for now, always leave the ‘Install dependencies’ box
checked).<br />
</p></li>
<li><p>The code <code>install.packages("tidyverse")</code> will install
tidyverse, or any other package.</p></li>
</ol>
<p>After installing a package, we have to load the package before using
it. Again, we have two options for loading a package:</p>
<ol style="list-style-type: decimal">
<li>In bottom right pane, the Packages tab allows us to search and
scroll for packages. The checkbox to the left of the package name
indicates if the package is loaded. By checking that box, we can load
the package.<br />
</li>
<li>The code <code>library(tidyverse)</code> will load tidyverse, or any
other package.</li>
</ol>
</div>
<div id="the-tidyverse" class="section level2">
<h2>The tidyverse</h2>
<p>For the rest of the course, we will be working within the <a
href="https://www.tidyverse.org/">tidyverse</a>, which consists of
several R packages for data manipulation, exploration, and
visualization. They are all based on a common design philosophy, mostly
developed by Hadley Wickham (whose name you will encounter a lot as you
gain more experience with R).</p>
<p>To access tidyverse, first we first need to install the tidyverse
package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>The <code>install.packages()</code> function is one way of installing
packages in R. You can also use Tools/Install Packages or click on the
Packages tab in the bottom right pane of your RStudio view and then
click on Install to type in the package you want to install.</p>
<p>Now with the <code>tidyverse</code> suite of packages installed, we
can load them with the following code:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>When you do that, you’ll see a lot of output to the console, most of
which you can safely ignore for now. <strong>Note you only need to
install the package once. However, each time you open up a new R session
and want to use the tidyverse, you will need to run line</strong>
<code>library(tidyverse)</code> <strong>at the start.</strong></p>
</div>
<div id="reading-in-tabular-data" class="section level2">
<h2>Reading in tabular data</h2>
<p>Almost all of the data we will encounter in this course (and in the
real world) will be tabular. Each row will represent a separate
observation and each column will record a particular measurement. For
instance, the table below lists different statistics for several
basketball players from the 2015-16 NBA regular season. The statistics
are: field goal makes (FGM), field goal attempts (FGA), three point
makes (TPM), three point attempts (TPA), free throw makes (FTM), and
free throw attempts (FTA).</p>
<table class="table table-striped table-bordered table-hover">
<thead>
<tr>
<th style="text-align:left;">
PLAYER
</th>
<th style="text-align:center;">
SEASON
</th>
<th style="text-align:right;">
FGM
</th>
<th style="text-align:right;">
FGA
</th>
<th style="text-align:right;">
TPM
</th>
<th style="text-align:right;">
TPA
</th>
<th style="text-align:right;">
FTM
</th>
<th style="text-align:right;">
FTA
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Stephen Curry
</td>
<td style="text-align:center;">
2016
</td>
<td style="text-align:right;">
805
</td>
<td style="text-align:right;">
1597
</td>
<td style="text-align:right;">
402
</td>
<td style="text-align:right;">
887
</td>
<td style="text-align:right;">
363
</td>
<td style="text-align:right;">
400
</td>
</tr>
<tr>
<td style="text-align:left;">
Damian Lillard
</td>
<td style="text-align:center;">
2016
</td>
<td style="text-align:right;">
618
</td>
<td style="text-align:right;">
1474
</td>
<td style="text-align:right;">
229
</td>
<td style="text-align:right;">
610
</td>
<td style="text-align:right;">
414
</td>
<td style="text-align:right;">
464
</td>
</tr>
<tr>
<td style="text-align:left;">
Jimmy Butler
</td>
<td style="text-align:center;">
2016
</td>
<td style="text-align:right;">
470
</td>
<td style="text-align:right;">
1034
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:right;">
206
</td>
<td style="text-align:right;">
395
</td>
<td style="text-align:right;">
475
</td>
</tr>
<tr>
<td style="text-align:left;">
James Harden
</td>
<td style="text-align:center;">
2016
</td>
<td style="text-align:right;">
710
</td>
<td style="text-align:right;">
1617
</td>
<td style="text-align:right;">
236
</td>
<td style="text-align:right;">
657
</td>
<td style="text-align:right;">
720
</td>
<td style="text-align:right;">
837
</td>
</tr>
<tr>
<td style="text-align:left;">
Kevin Durant
</td>
<td style="text-align:center;">
2016
</td>
<td style="text-align:right;">
698
</td>
<td style="text-align:right;">
1381
</td>
<td style="text-align:right;">
186
</td>
<td style="text-align:right;">
480
</td>
<td style="text-align:right;">
447
</td>
<td style="text-align:right;">
498
</td>
</tr>
<tr>
<td style="text-align:left;">
LeBron James
</td>
<td style="text-align:center;">
2016
</td>
<td style="text-align:right;">
737
</td>
<td style="text-align:right;">
1416
</td>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
282
</td>
<td style="text-align:right;">
359
</td>
<td style="text-align:right;">
491
</td>
</tr>
<tr>
<td style="text-align:left;">
Dirk Nowitzki
</td>
<td style="text-align:center;">
2016
</td>
<td style="text-align:right;">
498
</td>
<td style="text-align:right;">
1112
</td>
<td style="text-align:right;">
126
</td>
<td style="text-align:right;">
342
</td>
<td style="text-align:right;">
250
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
Giannis Antetokounmpo
</td>
<td style="text-align:center;">
2016
</td>
<td style="text-align:right;">
513
</td>
<td style="text-align:right;">
1013
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
296
</td>
<td style="text-align:right;">
409
</td>
</tr>
<tr>
<td style="text-align:left;">
DeMarcus Cousins
</td>
<td style="text-align:center;">
2016
</td>
<td style="text-align:right;">
601
</td>
<td style="text-align:right;">
1332
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
210
</td>
<td style="text-align:right;">
476
</td>
<td style="text-align:right;">
663
</td>
</tr>
<tr>
<td style="text-align:left;">
Marc Gasol
</td>
<td style="text-align:center;">
2016
</td>
<td style="text-align:right;">
328
</td>
<td style="text-align:right;">
707
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
203
</td>
<td style="text-align:right;">
245
</td>
</tr>
</tbody>
</table>
<p>Within the tidyverse, the standard way to store and manipulate
tabular data like this is to use what is known as a tbl (pronounced
“tibble”). At a high-level, a tbl is a two-dimensional array whose
columns can be of different data types. That is, the first column might
be characters (e.g. the names of athletes) and the second column can be
numeric (e.g. the number of points scored).</p>
<p>Throughout the course, you will be downloading all datasets we will
analyze to your “data” folder within your working directory (the
“Moneyball” folder). All of these datasets are in the form of <a
href="https://en.wikipedia.org/wiki/Comma-separated_values">comma-separated</a>
files, which have extension ‘.csv’.</p>
<p>Within the tidyverse, we can use the function <code>read_csv()</code>
to read in a csv file that is stored on your computer and create a
tibble containing all of the data. The dataset showed above is stored in
a csv file named “nba_shooting_small.csv” in the “data” folder of our
working directory. We will read it into R with the
<code>read_csv()</code> function like so:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>nba_shooting_small <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">&quot;data/nba_shooting_small.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 10 Columns: 8
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): PLAYER
## dbl (7): SEASON, FGM, FGA, TPM, TPA, FTM, FTA
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>Before proceeding, let us parse the syntax
<code>nba_shooting_small &lt;- read_csv(...)</code> The first thing to
notice is that we’re using the assignment operator that we saw in <a
href="ps0.html">Problem Set 0</a>. This tells R that we want it to
evalaute whatever is on the right-hand side (in this case
<code>read_csv(file = "data/nba_shooting_small.csv")</code>) and assign
the resulting evaluation to a new object called
<code>nba_shooting_small</code> (which R will create). We called the
function <code>read_csv()</code> with one argument <code>file</code>.
This argument is the <em>relative path</em> of the CSV file that we want
to read into R. Basically, R starts in the working directory and first
looks for a folder called “data.” If it finds such a folder, it looks
inside it for a file called “nba_shooting_small.csv.” If it finds the
file, it creates a tbl called <code>nba_shooting_small</code> that
contains all of the data.</p>
<p>When we type in the command and hit <kbd>Enter</kbd> or
<kbd>Return</kbd>, we see some output printed to the console. This is
<code>read_csv</code> telling us that it (a) found the file, (b) read it
in successfully, and (c) identified the type of data stored in each
column. We see, for instance, that the column named “PLAYER” contains
<em>character strings</em>, and is parsed as
<code>col_character()</code>. Similarly, the number of field goals made
(“FGM”) is parsed as integer data.</p>
<p>When we print out our tbl, R outputs many things: the dimension (in
this case, <span class="math inline">\(10 \times 8\)</span>), the column
names, the <em>type</em> of data included in each column, and then the
actual data.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>nba_shooting_small</span></code></pre></div>
<pre><code>## # A tibble: 10 × 8
##    PLAYER                SEASON   FGM   FGA   TPM   TPA   FTM   FTA
##    &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Stephen Curry           2016   805  1597   402   887   363   400
##  2 Damian Lillard          2016   618  1474   229   610   414   464
##  3 Jimmy Butler            2016   470  1034    64   206   395   475
##  4 James Harden            2016   710  1617   236   657   720   837
##  5 Kevin Durant            2016   698  1381   186   480   447   498
##  6 LeBron James            2016   737  1416    87   282   359   491
##  7 Dirk Nowitzki           2016   498  1112   126   342   250   280
##  8 Giannis Antetokounmpo   2016   513  1013    28   110   296   409
##  9 DeMarcus Cousins        2016   601  1332    70   210   476   663
## 10 Marc Gasol              2016   328   707     2     3   203   245</code></pre>
</div>
<div id="wrangling-data" class="section level2">
<h2>Wrangling Data</h2>
<p>Now that we have read in our dataset, we’re ready to begin our
analysis. Very often, our analysis will involve some type of
manipulation or <em>wrangling</em> of the data contained in the tbl. For
instance, we may want to compute some new summary statistic based on the
data in the table. In our NBA example, we could compute, say, each
player’s field goal percentage. Alternatively, we could subset our data
to find all players who took at least 100 three point shots and made at
least 80% of their free throws. The package <code>dplyr()</code>
contains five main functions corresponding to the most common things
that you’ll end up doing to your data. Over the next two days, we will
learn each of these</p>
<ul>
<li>Reorder the rows with <code>arrange()</code></li>
<li>Creating new variables that are functions of existing variables with
<code>mutate()</code></li>
<li>Identify observations satisfying certain conditions with
<code>filter()</code></li>
<li>Picking a subset of variables by names with
<code>select()</code></li>
<li>Generating simple summaries of the data with
<code>summarise()</code></li>
</ul>
<div id="arranging-data" class="section level3">
<h3>Arranging Data</h3>
<p>The <code>arrange()</code> function works by taking a tbl and a set
of column names and sorting the data according to the values in these
columns.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">arrange</span>(nba_shooting_small, FGA)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 8
##    PLAYER                SEASON   FGM   FGA   TPM   TPA   FTM   FTA
##    &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Marc Gasol              2016   328   707     2     3   203   245
##  2 Giannis Antetokounmpo   2016   513  1013    28   110   296   409
##  3 Jimmy Butler            2016   470  1034    64   206   395   475
##  4 Dirk Nowitzki           2016   498  1112   126   342   250   280
##  5 DeMarcus Cousins        2016   601  1332    70   210   476   663
##  6 Kevin Durant            2016   698  1381   186   480   447   498
##  7 LeBron James            2016   737  1416    87   282   359   491
##  8 Damian Lillard          2016   618  1474   229   610   414   464
##  9 Stephen Curry           2016   805  1597   402   887   363   400
## 10 James Harden            2016   710  1617   236   657   720   837</code></pre>
<p>The code above takes our tbl and sorts the rows in ascending order of
FGA. We see that Marc Gasol took the fewest number of field goals (707)
while James Harden and Stephen Curry attempted more than twice as many.
We could also sort the players in descending order using
<code>desc()</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">arrange</span>(nba_shooting_small, <span class="fu">desc</span>(FGA))</span></code></pre></div>
<pre><code>## # A tibble: 10 × 8
##    PLAYER                SEASON   FGM   FGA   TPM   TPA   FTM   FTA
##    &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 James Harden            2016   710  1617   236   657   720   837
##  2 Stephen Curry           2016   805  1597   402   887   363   400
##  3 Damian Lillard          2016   618  1474   229   610   414   464
##  4 LeBron James            2016   737  1416    87   282   359   491
##  5 Kevin Durant            2016   698  1381   186   480   447   498
##  6 DeMarcus Cousins        2016   601  1332    70   210   476   663
##  7 Dirk Nowitzki           2016   498  1112   126   342   250   280
##  8 Jimmy Butler            2016   470  1034    64   206   395   475
##  9 Giannis Antetokounmpo   2016   513  1013    28   110   296   409
## 10 Marc Gasol              2016   328   707     2     3   203   245</code></pre>
<p>In this small dataset, no two players attempted the same number of
field goals. In larger datasets (like the one you’ll see in <a
href="ps1.html">Problem Set1</a>), it can be the case that there are
multiple rows with the same value in a given column. When arranging the
rows of a tbl, to break ties, we can specify more than column. For
instance, the code below sorts the players first by the number of field
goal attempts and then by the number of three point attempts.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">arrange</span>(nba_shooting_small, FGA, TPA)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 8
##    PLAYER                SEASON   FGM   FGA   TPM   TPA   FTM   FTA
##    &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Marc Gasol              2016   328   707     2     3   203   245
##  2 Giannis Antetokounmpo   2016   513  1013    28   110   296   409
##  3 Jimmy Butler            2016   470  1034    64   206   395   475
##  4 Dirk Nowitzki           2016   498  1112   126   342   250   280
##  5 DeMarcus Cousins        2016   601  1332    70   210   476   663
##  6 Kevin Durant            2016   698  1381   186   480   447   498
##  7 LeBron James            2016   737  1416    87   282   359   491
##  8 Damian Lillard          2016   618  1474   229   610   414   464
##  9 Stephen Curry           2016   805  1597   402   887   363   400
## 10 James Harden            2016   710  1617   236   657   720   837</code></pre>
<p>Now consider the two lines of code:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">arrange</span>(nba_shooting_small, PLAYER)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 8
##    PLAYER                SEASON   FGM   FGA   TPM   TPA   FTM   FTA
##    &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Damian Lillard          2016   618  1474   229   610   414   464
##  2 DeMarcus Cousins        2016   601  1332    70   210   476   663
##  3 Dirk Nowitzki           2016   498  1112   126   342   250   280
##  4 Giannis Antetokounmpo   2016   513  1013    28   110   296   409
##  5 James Harden            2016   710  1617   236   657   720   837
##  6 Jimmy Butler            2016   470  1034    64   206   395   475
##  7 Kevin Durant            2016   698  1381   186   480   447   498
##  8 LeBron James            2016   737  1416    87   282   359   491
##  9 Marc Gasol              2016   328   707     2     3   203   245
## 10 Stephen Curry           2016   805  1597   402   887   363   400</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>nba_shooting_small</span></code></pre></div>
<pre><code>## # A tibble: 10 × 8
##    PLAYER                SEASON   FGM   FGA   TPM   TPA   FTM   FTA
##    &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Stephen Curry           2016   805  1597   402   887   363   400
##  2 Damian Lillard          2016   618  1474   229   610   414   464
##  3 Jimmy Butler            2016   470  1034    64   206   395   475
##  4 James Harden            2016   710  1617   236   657   720   837
##  5 Kevin Durant            2016   698  1381   186   480   447   498
##  6 LeBron James            2016   737  1416    87   282   359   491
##  7 Dirk Nowitzki           2016   498  1112   126   342   250   280
##  8 Giannis Antetokounmpo   2016   513  1013    28   110   296   409
##  9 DeMarcus Cousins        2016   601  1332    70   210   476   663
## 10 Marc Gasol              2016   328   707     2     3   203   245</code></pre>
<p>In the first line, we’ve sorted the players in alphabet order of
their first name. But when we print out our tbl,
<code>nba_shooting_small</code>, we see that the players are no longer
sorted. This is because dplyr (and most other R) functions
<strong>never</strong> modify their input but work by creating a copy
and modifying that copy. If we wanted to preserve the new ordering, we
would have to <em>overwrite</em> <code>nba_shooting_small</code> using a
combination of the assignment operator and <code>arrange()</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>nba_shooting_small <span class="ot">&lt;-</span> <span class="fu">arrange</span>(nba_shooting_small, PLAYER)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>nba_shooting_small</span></code></pre></div>
<pre><code>## # A tibble: 10 × 8
##    PLAYER                SEASON   FGM   FGA   TPM   TPA   FTM   FTA
##    &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Damian Lillard          2016   618  1474   229   610   414   464
##  2 DeMarcus Cousins        2016   601  1332    70   210   476   663
##  3 Dirk Nowitzki           2016   498  1112   126   342   250   280
##  4 Giannis Antetokounmpo   2016   513  1013    28   110   296   409
##  5 James Harden            2016   710  1617   236   657   720   837
##  6 Jimmy Butler            2016   470  1034    64   206   395   475
##  7 Kevin Durant            2016   698  1381   186   480   447   498
##  8 LeBron James            2016   737  1416    87   282   359   491
##  9 Marc Gasol              2016   328   707     2     3   203   245
## 10 Stephen Curry           2016   805  1597   402   887   363   400</code></pre>
</div>
<div id="creating-new-variables-from-old" class="section level3">
<h3>Creating new variables from old</h3>
<p>While arranging our data is useful, it is not quite sufficient to
determine which player is the best shooter in our dataset. Perhaps the
simplest way to compare players’ shooting ability is with field goal
percentage (FGP). We can compute this percentage using the formula <span
class="math inline">\(\text{FGP} =
\frac{\text{FGM}}{\text{FGA}}.\)</span> We use the function
<code>mutate()</code> to add a column to our tbl.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">mutate</span>(nba_shooting_small, <span class="at">FGP =</span> FGM<span class="sc">/</span>FGA)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 9
##    PLAYER                SEASON   FGM   FGA   TPM   TPA   FTM   FTA   FGP
##    &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Damian Lillard          2016   618  1474   229   610   414   464 0.419
##  2 DeMarcus Cousins        2016   601  1332    70   210   476   663 0.451
##  3 Dirk Nowitzki           2016   498  1112   126   342   250   280 0.448
##  4 Giannis Antetokounmpo   2016   513  1013    28   110   296   409 0.506
##  5 James Harden            2016   710  1617   236   657   720   837 0.439
##  6 Jimmy Butler            2016   470  1034    64   206   395   475 0.455
##  7 Kevin Durant            2016   698  1381   186   480   447   498 0.505
##  8 LeBron James            2016   737  1416    87   282   359   491 0.520
##  9 Marc Gasol              2016   328   707     2     3   203   245 0.464
## 10 Stephen Curry           2016   805  1597   402   887   363   400 0.504</code></pre>
<p>The syntax for <code>mutate()</code> looks kind of similar to
<code>arrange()</code>: the first argument tells R what tbl we want to
manipulate and the second argument tells R how to compute FGP. As
expected, when we run this command, R returns a tbl with a new column
containing the field goal percentage for each of these 10 players. Just
like with <code>arrange()</code>, if we call <code>mutate()</code> by
itself, R will not add the new column to our existing data frame. In
order to permanently add a column for field goal percentages to
<code>nba_shooting_small</code>, we’re going to need to use the
assignment operator.</p>
<p>It turns out that we can add <em>multiple</em> columns to a tbl at
once by passing more arguments to <code>mutate()</code>, one for each
column we wish to define.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">mutate</span>(nba_shooting_small, <span class="at">FGP =</span> FGM<span class="sc">/</span>FGA, <span class="at">TPP =</span> TPM<span class="sc">/</span>TPA, <span class="at">FTP =</span> FTM<span class="sc">/</span>FTA)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 11
##    PLAYER           SEASON   FGM   FGA   TPM   TPA   FTM   FTA   FGP   TPP   FTP
##    &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Damian Lillard     2016   618  1474   229   610   414   464 0.419 0.375 0.892
##  2 DeMarcus Cousins   2016   601  1332    70   210   476   663 0.451 0.333 0.718
##  3 Dirk Nowitzki      2016   498  1112   126   342   250   280 0.448 0.368 0.893
##  4 Giannis Antetok…   2016   513  1013    28   110   296   409 0.506 0.255 0.724
##  5 James Harden       2016   710  1617   236   657   720   837 0.439 0.359 0.860
##  6 Jimmy Butler       2016   470  1034    64   206   395   475 0.455 0.311 0.832
##  7 Kevin Durant       2016   698  1381   186   480   447   498 0.505 0.388 0.898
##  8 LeBron James       2016   737  1416    87   282   359   491 0.520 0.309 0.731
##  9 Marc Gasol         2016   328   707     2     3   203   245 0.464 0.667 0.829
## 10 Stephen Curry      2016   805  1597   402   887   363   400 0.504 0.453 0.908</code></pre>
</div>
</div>
<div id="a-quick-digression-r-scripts" class="section level2">
<h2>A quick digression: R Scripts</h2>
<p>Up to this point, we have been working strictly within the R console,
proceeding line-by-line. In the previous code block, we tried to add
three columns to our tbl and the mutate call got a little bit
overwhelming. Imagine trying to add five or six more columns
simultaneously! As our commands become more and more complex, you’ll
find that using the console can get pretty cramped. And if you make a
mistake in entering your code, you’ll get an error and have to start all
over again. Plus, when we start a new session of R Studio, the console
is cleared. How can we save the commands we typed into R? We do so using
an <strong>R Script</strong>.</p>
<p>An R Script is a file type which R recognizes as storing R commands
and is saved as a .R file. R Scripts are useful as we can edit our code
before sending it to be run in the console.</p>
<p>We can start a new R Script by clicking on the top left symbol in R
Studio and selecting “R Script”.</p>
<p><img src="figures/lecture1_fig1.png" /></p>
<p>The untitled R Script will then appear in the top left hand box of R
Studio.</p>
<p><img src="figures/lecture1_fig2.png" /></p>
<p>In the R Script, type the following:</p>
<pre><code>2 * 3
x &lt;- 4
sqrt(x)</code></pre>
<p>Now our code is just sitting in the R Script. To run the code (that
is, evaluate it in the console) we click the “Run” button in the top
right of the script. This will run one line of code at a time -
whichever line the cursor is on. Place your cursor on the first line and
click “Run”. Observe how <code>2 * 3</code> now appears in the console,
as well as the output <code>6</code>.</p>
<p><img src="figures/lecture1_fig3.png" /></p>
<p>If we want to run multiple lines at once, we highlight them all and
click “Run”.</p>
<p><img src="figures/lecture1_fig4.png" /></p>
<p>Note in the above that we had to run <code>x &lt;- 4</code> before
<code>sqrt(x)</code>. We need to define our variables first and run this
code in the console before performing calculations with those variables.
The console can’t “see” the script unless you run the code in the
script.</p>
<p>One very nice thing about RStudio’s script editor is that it will
highlight syntax errors with a red squiggly line and a red cross in the
sidebar. If you move your mouse over the line, a pop-up will appear that
can help you diagnose the potential problem.</p>
<p>Another advantage of R scripts is that you can add comments to your
code, which are preceded by the pound sign / hash sign #. Comments are
useful because they allow you to explain what your code is doing.
<strong>Throughout the rest of this course, we will be working almost
exclusively with R scripts rather than directly entering commands into
the console.</strong> For the sake of organization, you should save all
of your scripts into the ‘scripts’ folder we created within the
‘Moneyball’ working directory.</p>
</div>
<div id="back-to-the-nba-data" class="section level2">
<h2>Back to the NBA data</h2>
<p>One huge advantage with working with R script is the ability to
separate commands onto multiple lines. For instance, to add columns for
FGP, FTP, and TPP to our tbl, we can write the following in our script
window.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>nba_shooting_small <span class="ot">&lt;-</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>  <span class="fu">mutate</span>(nba_shooting_small,</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>         <span class="at">FGP =</span> FGM<span class="sc">/</span>FGA,</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>         <span class="at">TPP =</span> TPM<span class="sc">/</span>TPA,</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>         <span class="at">FTP =</span> FTM<span class="sc">/</span>FTA)</span></code></pre></div>
<p>Notice how we have separated our command into multiple lines. This
makes our script much easier to read. While it seems a bit cumbersome to
write our code like this now, it will make our code much easier to read
when we start to string multiple manipulations together using the pipe
operator <code>%&gt;%</code>, which we will meet in <a
href="lecture3.html">Lecture 3</a>.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
