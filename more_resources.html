<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>More resources</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">WMA2020</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-futbol-o"></span>
     
    Lecture Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lecture1.html">Lecture 1</a>
    </li>
    <li>
      <a href="lecture2.html">Lecture 2</a>
    </li>
    <li>
      <a href="lecture3.html">Lecture 3</a>
    </li>
    <li>
      <a href="lecture4.html">Lecture 4</a>
    </li>
    <li>
      <a href="lecture5.html">Lecture 5</a>
    </li>
    <li>
      <a href="lecture6.html">Lecture 6</a>
    </li>
    <li>
      <a href="lecture7.html">Lecture 7</a>
    </li>
    <li>
      <a href="lecture8.html">Lecture 8</a>
    </li>
    <li>
      <a href="nfl_lecture.html">nflscrapR lecture</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-dribbble"></span>
     
    Problem Sets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ps0.html">Problem Set 0</a>
    </li>
    <li>
      <a href="ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="ps2.html">Problem Set 2</a>
    </li>
    <li>
      <a href="ps3.html">Problem Set 3</a>
    </li>
    <li>
      <a href="ps4.html">Problem Set 4</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-bar-chart"></span>
     
    Training Camp
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="install_setup.html">Installation</a>
    </li>
    <li>
      <a href="tc_lecture1.html">Lecture 1</a>
    </li>
    <li>
      <a href="tc_ps1.html">Problem Set 1</a>
    </li>
    <li>
      <a href="tc_lecture2.html">Lecture 2</a>
    </li>
    <li>
      <a href="tc_ps2.html">Problem Set 2</a>
    </li>
    <li>
      <a href="tc_lecture3.html">Lecture 3</a>
    </li>
    <li>
      <a href="tc_ps3.html">Problem Set 3</a>
    </li>
    <li>
      <a href="tc_lecture4.html">Lecture 4</a>
    </li>
    <li>
      <a href="tc_lecture5.html">Lecture 5</a>
    </li>
    <li>
      <a href="more_resources.html">More resources</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">More resources</h1>

</div>


<p>So far in this course you’ve worked with data that we had already prepared for you. It turns out that there are many R packages and tools that you can use to get data from a variety of different sources. Below, we will provide a brief walkthrough of just a few of these resources.</p>
<div id="lahman" class="section level3">
<h3><code>Lahman</code></h3>
<p>The <a href="http://www.seanlahman.com/baseball-archive/statistics/">Lahman Baseball Database</a> is a popular resource created by Sean Lahman with historical data going back to 1871. Rather than having to access the database directly via complicated computing procedures, there is an R package we can install to access the data instead. The following code installs the package from the CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">install.packages</span>(<span class="st">&quot;Lahman&quot;</span>)</span></code></pre></div>
<p>Next we load the package, and checkout what datasets are available:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(Lahman)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">data</span>(<span class="dt">package =</span> <span class="st">&quot;Lahman&quot;</span>)</span></code></pre></div>
<p>There is an incredible amount of data here going up through the 2018 season (it updates following the end of each season). As an example, let’s access the Teams dataset, use a <code>group_by</code> operation to calculate the number of strikeouts each year since 1871, and plot the line over time:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">data</span>(<span class="st">&quot;Teams&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="op">&gt;</span><span class="st"> </span>Teams <span class="op">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">group_by</span>(yearID) <span class="op">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">n_so =</span> <span class="kw">sum</span>(SO, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> yearID, <span class="dt">y =</span> n_so)) <span class="op">+</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="op">+</span><span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of strikeouts&quot;</span>,</span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="op">+</span><span class="st">        </span><span class="dt">title =</span> <span class="st">&quot;Total number of strikeouts in each baseball season since 1871&quot;</span>,</span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="op">+</span><span class="st">        </span><span class="dt">caption =</span> <span class="st">&quot;Data courtesy of Lahman&quot;</span>) <span class="op">+</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="op">+</span><span class="st">   </span><span class="kw">theme_bw</span>()</span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="st">`</span><span class="dt">summarise()</span><span class="st">`</span> ungrouping <span class="kw">output</span> (override with <span class="st">`</span><span class="dt">.groups</span><span class="st">`</span> argument)</span></code></pre></div>
<p><img src="more_resources_files/figure-html/unnamed-chunk-2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We can see the increasing trend over, but think about how this display could be improved to handle possible changes that have taken place in baseball.</p>
</div>
<div id="installing-github-packages" class="section level3">
<h3>Installing GitHub Packages</h3>
<p><strong>An important note to keep in mind is that most of these resources are largely still in development, this means you may face challenges with installation and use.</strong> While the vast majority of <code>R</code> packages you will commonly use are able to be installed using <code>install.packages()</code> because they are on the CRAN, there are a variety of popular <code>R</code> packages for accessing sports data that are currently only available through GitHub. In order to access these packages, we first need to install them using a package called <code>devtools</code>. The code below installs the <code>devtools</code> package:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span></code></pre></div>
<p>The <code>devtools</code> package has a function, <code>install_github</code> that we will use for installing the remaining packages used below.</p>
</div>
<div id="baseballr" class="section level3">
<h3><code>baseballr</code></h3>
<p>Created by <a href="http://billpetti.github.io/baseballr/">Bill Petti, the <code>baseballr</code> package</a> has become a popular resource for accessing baseball data from variety of resources, such as <a href="https://www.fangraphs.com/">FanGraphs</a> and <a href="https://www.baseball-reference.com/">Baseball-Reference</a> directly into <code>R</code>. One of the best features of the <code>baseballr</code> package is the functionality it provides us for directly accessing the publicly available pitch-by-pitch and Statcast data available from <a href="https://baseballsavant.mlb.com/">baseball-savant</a>.</p>
<p>We first install the package using the <code>devtools</code> package explained above, and then load its functions:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="op">&gt;</span><span class="st"> </span>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;BillPetti/baseballr&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(baseballr)</span></code></pre></div>
<p>Using the <code>baseballr</code> package we can access all pitches thrown to a hitter in the current season, giving us Statcast data like exit velocity and launch angle. We first use the <code>playerid_lookup</code> function to find the Statcast ID for the Pittsburgh Pirates All-Star firstbaseman Josh Bell:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">playerid_lookup</span>(<span class="dt">last_name =</span> <span class="st">&quot;Bell&quot;</span>, <span class="dt">first_name =</span> <span class="st">&quot;Josh&quot;</span>)</span></code></pre></div>
<p>This will load up a look-up table with all identifiers joining various sources together (it will take a couple minutes to run and don’t worry about the warning messages). The Josh Bell we’re interested in has the <code>mlbam_id</code> of 605137. Using this id, we can grab all pitches thrown to Bell in the current MLB season so far:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="op">&gt;</span><span class="st"> </span>bell_statcast_data &lt;-<span class="st"> </span><span class="kw">scrape_statcast_savant_batter</span>(<span class="dt">start_date =</span> <span class="st">&quot;2019-01-01&quot;</span>, <span class="dt">end_date =</span> <span class="st">&quot;2019-12-31&quot;</span>, <span class="dt">batterid =</span> <span class="dv">605137</span>)</span></code></pre></div>
<p>This dataset contains many columns, for now we will look at the relationship between the distance traveled of Josh Bell’s batted balls (denoted by <code>type == "X"</code>) and the launch angle (<code>launch_angle</code>) as well as the exit velocity (<code>launch_speed</code>):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="op">&gt;</span><span class="st"> </span>bell_statcast_data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(type <span class="op">==</span><span class="st"> &quot;X&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> launch_speed, <span class="dt">y =</span> launch_angle, <span class="dt">color =</span> hit_distance_sc)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_viridis_c</span>(<span class="dt">option =</span> <span class="st">&quot;A&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="op">+</span><span class="st">     </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Exit velocity (MPH)&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Launch angle (degrees)&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;Distance (feet)&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Josh Bell&#39;s launch angle, exit velocity, and distance traveled&quot;</span>, </span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="op">+</span><span class="st">         </span><span class="dt">caption =</span> <span class="st">&quot;Data accessed via baseballr&quot;</span>)</span></code></pre></div>
<p><img src="more_resources_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>This is just a single example of the type of data available using <code>baseballr</code>, see the package website for more <a href="http://billpetti.github.io/baseballr/data-acquisition-functions/">data acquisition functions</a>. Additionally, the <a href="https://baseballwithr.wordpress.com/">Exploring Baseball Data with R website by Jim Albert</a> is an incredible resource with a variety of examples of learning R code all in the context of baseball data analysis.</p>
</div>
<div id="nbastatr" class="section level3">
<h3><code>nbastatr</code></h3>
<p>The <a href="http://asbcllc.com/nbastatR/"><code>nbastatr</code> package</a> created by Alex Bresler is analogous to the <code>baseballr</code> package as it provides many different functions for accessing NBA data from a variety of websites. Again to be able to use the package you need to install it from GitHub:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="op">&gt;</span><span class="st"> </span>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;abresler/nbastatR&quot;</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(nbastatR)</span></code></pre></div>
<p><strong>There will likely be several messages that appear when installing this package, please let us know if you encounter any strange issues.</strong> The code below demonstrates how to get all shot attempts by the 2019 NBA champions, the Toronto Raptors, in the past season using this package:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="op">&gt;</span><span class="st"> </span>raptors_shots &lt;-<span class="st"> </span><span class="kw">teams_shots</span>(<span class="dt">teams =</span> <span class="st">&quot;Toronto Raptors&quot;</span>, <span class="dt">seasons =</span> <span class="kw">c</span>(<span class="dv">2019</span>))</span></code></pre></div>
<p>Using this shot data, we can view the all shot attempts by the Raptors throughout the season colored by whether or not they made the shot.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="op">&gt;</span><span class="st"> </span>raptors_shots <span class="op">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> locationX, <span class="dt">y =</span> locationY,</span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="op">+</span><span class="st">              </span><span class="dt">color =</span> isShotMade)) <span class="op">+</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="op">+</span><span class="st">   </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;darkorange&quot;</span>, <span class="st">&quot;darkblue&quot;</span>)) <span class="op">+</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="op">+</span><span class="st">   </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="op">+</span><span class="st">   </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Shot attempts by Toronto Raptors in 2018-19 NBA season&quot;</span>,</span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="op">+</span><span class="st">        </span><span class="dt">caption =</span> <span class="st">&quot;Data accessed via nbastatR&quot;</span>)</span></code></pre></div>
<p><img src="more_resources_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>It’s apparent from this chart the effect of the three-point line of their shot selection.</p>
</div>
<div id="nflscrapr" class="section level3">
<h3><code>nflscrapR</code></h3>
<p>Created by Max Horowitz, Ron Yurko, and Sam Ventura, the <a href="https://github.com/maksimhorowitz/nflscrapR"><code>nflscrapR</code> package</a> gives R users the ability to scrape play-by-play data from the NFL in real-time during games providing expected points and win probability estimates. Just like the <code>baseballr</code> and <code>nbastatR</code> packages, the <code>nflscrapR</code> package must be installed from GitHub:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="op">&gt;</span><span class="st"> </span>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;maksimhorowitz/nflscrapR&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(nflscrapR)</span></code></pre></div>
<p>Now we can use this package to gather play-by-play data, but this can take some time to run. Instead, one of the package authors (and one of your instructors!) has already scraped <a href="https://github.com/ryurko/nflscrapR-data">all NFL data going back to the 2009 season and made it available to access on GitHub</a>. We can directly read in the play-by-play data from this past 2018 regular season using the following url in the <code>read_csv</code> function:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="op">&gt;</span><span class="st"> </span>pbp_<span class="dv">2018</span> &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/ryurko/nflscrapR-data/master/play_by_play_data/regular_season/reg_pbp_2018.csv&quot;</span>)</span></code></pre></div>
<p>With this data, we can summarize the performance of all NFL teams using the expected points added (EPA) per game on offense and defense. EPA tells us how much value the team provided relative to an average baseline. The more positive the better the offensive performance. This means the more negative the value the defensive performance, so in the code chunk below we multiply the defensive values by -1 so it’s similar to offensive performance higher values meaning better performance. The following code uses this data to create offensive and defensive summaries that we will join together to plot:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="op">&gt;</span><span class="st"> </span>offense_epa_<span class="dv">18</span> &lt;-<span class="st"> </span>pbp_<span class="dv">2018</span> <span class="op">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(posteam)) <span class="op">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">group_by</span>(posteam) <span class="op">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarise</span>(<span class="dt">n_games =</span> <span class="kw">length</span>(<span class="kw">unique</span>(game_id)),</span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="op">+</span><span class="st">             </span><span class="dt">off_total_epa =</span> <span class="kw">sum</span>(epa, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">off_epa_per_game =</span> off_total_epa <span class="op">/</span><span class="st"> </span>n_games)</span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="st">`</span><span class="dt">summarise()</span><span class="st">`</span> ungrouping <span class="kw">output</span> (override with <span class="st">`</span><span class="dt">.groups</span><span class="st">`</span> argument)</span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="er">&gt;</span><span class="st"> </span>defense_epa_<span class="dv">18</span> &lt;-<span class="st"> </span>pbp_<span class="dv">2018</span> <span class="op">%&gt;%</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(defteam)) <span class="op">%&gt;%</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="op">+</span><span class="st">   </span><span class="kw">group_by</span>(defteam) <span class="op">%&gt;%</span></span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarise</span>(<span class="dt">n_games =</span> <span class="kw">length</span>(<span class="kw">unique</span>(game_id)),</span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="op">+</span><span class="st">             </span><span class="dt">def_total_epa =</span> <span class="kw">sum</span>(epa, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="op">+</span><span class="st">   </span><span class="co"># This time multiply by -1, since negative values are better for defense:</span></span>
<span id="cb14-15"><a href="#cb14-15"></a><span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">def_epa_per_game =</span> <span class="dv">-1</span> <span class="op">*</span><span class="st"> </span>def_total_epa <span class="op">/</span><span class="st"> </span>n_games)</span>
<span id="cb14-16"><a href="#cb14-16"></a><span class="st">`</span><span class="dt">summarise()</span><span class="st">`</span> ungrouping <span class="kw">output</span> (override with <span class="st">`</span><span class="dt">.groups</span><span class="st">`</span> argument)</span></code></pre></div>
<p>Now rather than displaying just points or team abbreviations, we can take advantage of files provided to use by <a href="https://statsbylopez.netlify.com/">Michael Lopez, the Director of Data and Analytics for the NFL</a>, and plot the team logos directly. This can be done using the <code>ggimage</code> package that can be installed as follows:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">install.packages</span>(<span class="st">&quot;ggimages&quot;</span>)</span></code></pre></div>
<p>Next we access the images as a dataset, and join it together to the offense and defense summaries before creating our chart:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(ggimage)</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="op">&gt;</span><span class="st"> </span>nfl_logos_df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/statsbylopez/BlogPosts/master/nfl_teamlogos.csv&quot;</span>)</span>
<span id="cb16-3"><a href="#cb16-3"></a>Parsed with column specification<span class="op">:</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="kw">cols</span>(</span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="dt">team =</span> <span class="kw">col_character</span>(),</span>
<span id="cb16-6"><a href="#cb16-6"></a>  <span class="dt">team_code =</span> <span class="kw">col_character</span>(),</span>
<span id="cb16-7"><a href="#cb16-7"></a>  <span class="dt">url =</span> <span class="kw">col_character</span>()</span>
<span id="cb16-8"><a href="#cb16-8"></a>)</span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># Create the data frame to be used for all of the charts:</span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="er">&gt;</span><span class="st"> </span>offense_epa_<span class="dv">18</span> <span class="op">%&gt;%</span></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="op">+</span><span class="st">   </span><span class="kw">inner_join</span>(defense_epa_<span class="dv">18</span>, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;posteam&quot;</span> =<span class="st"> &quot;defteam&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb16-13"><a href="#cb16-13"></a><span class="op">+</span><span class="st">   </span><span class="kw">left_join</span>(nfl_logos_df, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;posteam&quot;</span> =<span class="st"> &quot;team_code&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="op">+</span><span class="st">   </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> off_epa_per_game, <span class="dt">y =</span> def_epa_per_game)) <span class="op">+</span></span>
<span id="cb16-15"><a href="#cb16-15"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_image</span>(<span class="kw">aes</span>(<span class="dt">image =</span> url), <span class="dt">size =</span> <span class="fl">0.05</span>) <span class="op">+</span></span>
<span id="cb16-16"><a href="#cb16-16"></a><span class="op">+</span><span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Offensive EPA per game&quot;</span>,</span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="op">+</span><span class="st">        </span><span class="dt">y =</span> <span class="st">&quot;Defensive EPA per game&quot;</span>,</span>
<span id="cb16-18"><a href="#cb16-18"></a><span class="op">+</span><span class="st">        </span><span class="dt">caption =</span> <span class="st">&quot;Data accessed via nflscrapR&quot;</span>,</span>
<span id="cb16-19"><a href="#cb16-19"></a><span class="op">+</span><span class="st">        </span><span class="dt">title =</span> <span class="st">&quot;Offensive and defensive EPA per game for each team in 2018 NFL season&quot;</span>) <span class="op">+</span></span>
<span id="cb16-20"><a href="#cb16-20"></a><span class="op">+</span><span class="st">   </span><span class="co"># Add reference lines at 0</span></span>
<span id="cb16-21"><a href="#cb16-21"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="op">+</span></span>
<span id="cb16-22"><a href="#cb16-22"></a><span class="op">+</span><span class="st">   </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="op">+</span></span>
<span id="cb16-23"><a href="#cb16-23"></a><span class="op">+</span><span class="st">   </span><span class="kw">theme_bw</span>()</span>
<span id="cb16-24"><a href="#cb16-24"></a>Warning<span class="op">:</span><span class="st"> </span>Removed <span class="dv">1</span> rows containing missing <span class="kw">values</span> (geom_image).</span></code></pre></div>
<p><img src="more_resources_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The top right displays the teams that excelled at both offense and defense, while the lower right shows teams that had the best offenses such as the Chiefs but performed poorly on defense. The lower left shows the worst overall teams, which should not come as a surprise that the Arizona Cardinals and Oakland Raiders jump out.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
